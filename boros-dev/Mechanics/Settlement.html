<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-boros-dev docs-version-current docs-doc-page docs-doc-id-Mechanics/Settlement" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Settlement | Pendle Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://pendle.finance/boros-dev/Mechanics/Settlement"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-boros-dev-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-boros-dev-current"><meta data-rh="true" property="og:title" content="Settlement | Pendle Documentation"><meta data-rh="true" name="description" content="In Boros, settlement refers to position update when a trade happens (e.g. market order placed, limit order filled) and the periodic floating payment."><meta data-rh="true" property="og:description" content="In Boros, settlement refers to position update when a trade happens (e.g. market order placed, limit order filled) and the periodic floating payment."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://pendle.finance/boros-dev/Mechanics/Settlement"><link data-rh="true" rel="alternate" href="https://pendle.finance/boros-dev/Mechanics/Settlement" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://pendle.finance/cn/boros-dev/Mechanics/Settlement" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://pendle.finance/boros-dev/Mechanics/Settlement" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"âœ… Settlement","item":"https://pendle.finance/boros-dev/Mechanics/Settlement"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6ZBS49V0YS"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-6ZBS49V0YS",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Pendle Documentation" href="/opensearch.xml">





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.85c6c580.css">
<script src="/assets/js/runtime~main.0e3939e4.js" defer="defer"></script>
<script src="/assets/js/main.ada506da.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12h18m-9-9h9m-9 18h9"></path></svg></button><a href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Pendle"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Pendle V2</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/pendle-v2/Introduction">Pendle V2 Docs</a></li><li><a href="https://pendle.gitbook.io/pendle-academy/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Pendle Academy<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Boros</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/boros-dev">Boros Dev Docs</a></li><li><a href="https://pendle.gitbook.io/boros/boros-docs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Boros Docs<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://pendle.gitbook.io/boros" target="_blank" rel="noopener noreferrer" class="dropdown__link">Boros Academy<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="searchContainer_eKWQ"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div><div class="language-switcher" style="display:flex;align-items:center;margin-left:12px"><select style="background:rgba(248, 250, 252, 0.8);border:1px solid rgba(15, 23, 42, 0.1);border-radius:8px;padding:6px 12px;font-size:14px;color:#475569;cursor:pointer;min-width:80px"><option value="en" selected="">English</option><option value="cn">ä¸­æ–‡ï¼ˆä¸­å›½)</option></select></div></div></div></div><div class="scrollProgressLine_ACL0"></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_cWv0"><aside class="theme-doc-sidebar-container docSidebarContainer_RSuS"><div class="sidebar_mhZE"><nav class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/boros-dev">ğŸ“– Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/boros-dev/LitePaper">ğŸ“„ Lite Paper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/boros-dev/HighLevelArchitecture">ğŸ—ï¸ High Level Architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/boros-dev/Mechanics/OrderBook">âš™ï¸ Mechanics</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/boros-dev/Mechanics/OrderBook">ğŸ“Š Order Book</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/boros-dev/Mechanics/Margin">ğŸ’° Margin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/boros-dev/Mechanics/Settlement">âœ… Settlement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/boros-dev/Mechanics/Fees">ğŸ’µ Fees</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/boros-dev/Contracts/Router">ğŸ“œ Contracts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/boros-dev/Backend/REST API">ğŸ”Œ Backend Integration</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/boros-dev/FAQ">â“ FAQ</a></li></ul></nav></div></aside><main class="docMainContainer_hjYf"><div class="container padding-top--md padding-bottom--lg"><div><div class="row"><div class="col"><div><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">âš™ï¸ Mechanics</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">âœ… Settlement</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Settlement</h1></header>
<p>In Boros, settlement refers to position update when a trade happens (e.g. market order placed, limit order filled) and the periodic floating payment.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="trade-settlement">Trade Settlement<a href="#trade-settlement" class="hash-link" aria-label="Direct link to Trade Settlement" title="Direct link to Trade Settlement">â€‹</a></h3>
<p>When a trade is executed (e.g., a market order fills against limit orders), traders must pay an upfront fixed cost immediately. This upfront cost represents the present value of the fixed rate component of the interest rate swap for the remaining time to maturity.</p>
<p><strong>Formula:</strong></p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>UpfrontÂ Cost</mtext><mo>=</mo><mtext>OrderÂ Size</mtext><mo>Ã—</mo><mtext>OrderÂ Rate</mtext><mo>Ã—</mo><mfrac><mtext>TimeÂ toÂ Maturity</mtext><mtext>YEAR</mtext></mfrac></mrow><annotation encoding="application/x-tex">\text{Upfront Cost} = \text{Order Size} \times \text{Order Rate} \times \frac{\text{Time to Maturity}}{\text{YEAR}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">UpfrontÂ Cost</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em"></span><span class="mord text"><span class="mord">OrderÂ Size</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em"></span><span class="mord text"><span class="mord">OrderÂ Rate</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.0463em;vertical-align:-0.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">YEAR</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">TimeÂ toÂ Maturity</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>
<p>Where:</p>
<ul>
<li><strong>Order Size</strong>: The notional amount of the trade</li>
<li><strong>Order Rate</strong>: The fixed interest rate agreed upon in the trade</li>
<li><strong>Time to Maturity</strong>: <code>maturity - latestFTime</code> (in seconds)<!-- -->
<ul>
<li><code>maturity</code>: The market&#x27;s expiration timestamp</li>
<li><code>latestFTime</code>: The timestamp of the last periodic payment</li>
</ul>
</li>
<li><strong>YEAR</strong>: 365 days in seconds (31,536,000)</li>
<li>Both <code>maturity</code> and <code>latestFTime</code> can be retrieved from <code>market.descriptor()</code></li>
</ul>
<p><strong>Example:</strong>
For a market with 8-hour payment periods:</p>
<ul>
<li>If current time is 10:00 UTC</li>
<li>The <code>latestFTime</code> would be 8:00 UTC (the last 8-hour boundary)</li>
</ul>
<p><strong>Direction of Payment:</strong></p>
<ul>
<li><strong>Long positions</strong>: Pay upfront cost to receive floating rate</li>
<li><strong>Short positions</strong>: Receive upfront cost to pay floating rate</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="floating-rate-settlement">Floating Rate Settlement<a href="#floating-rate-settlement" class="hash-link" aria-label="Direct link to Floating Rate Settlement" title="Direct link to Floating Rate Settlement">â€‹</a></h3>
<p>Floating rate payments occur periodically (e.g., every 8 hours) to exchange the difference between fixed and floating rates. These payments are calculated based on the position size and the change in the floating index.</p>
<p><strong>Formula:</strong></p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>FloatingÂ Payment</mtext><mo>=</mo><mtext>SignedÂ PositionÂ Size</mtext><mo>Ã—</mo><mi mathvariant="normal">Î”</mi><mtext>FloatingÂ Index</mtext></mrow><annotation encoding="application/x-tex">\text{Floating Payment} = \text{Signed Position Size} \times \Delta\text{Floating Index}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">FloatingÂ Payment</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">SignedÂ PositionÂ Size</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord">Î”</span><span class="mord text"><span class="mord">FloatingÂ Index</span></span></span></span></span></span>
<p>Where:</p>
<ul>
<li><strong>Signed Position Size</strong>: Positive for long positions, negative for short positions</li>
<li><strong>Î”Floating Index</strong>: The change in floating index since the last settlement</li>
</ul>
<p><strong>Floating Index:</strong>
The floating index is a cumulative value that represents the total yield earned by 1 unit of the underlying asset since inception.</p>
<p><strong>Example:</strong>
Consider a perpetual futures funding rate scenario:</p>
<ul>
<li>If the funding rate on Binance for the last 8-hour epoch is 0.0001 (0.01%)</li>
<li>The Î”Floating Index would be 0.0001</li>
<li>A long position of 100 units would receive: <code>100 Ã— 0.0001 = 0.01</code> units</li>
<li>A short position of 100 units would receive: <code>-100 Ã— 0.0001 = -0.01</code> units (negative payment means paying)</li>
</ul>
<p><strong>Fees:</strong>
Floating payments are subject to settlement fees. For detailed fee structure, see <a href="/boros-dev/Mechanics/Fees">Fees</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="algorithm">Algorithm<a href="#algorithm" class="hash-link" aria-label="Direct link to Algorithm" title="Direct link to Algorithm">â€‹</a></h2>
<p>In traditional order books, when a market order matches against limit orders, all makers&#x27; positions are updated immediately. On-chain, this becomes prohibitively expensive as a single order could match against hundreds or thousands of limit orders, each requiring storage updates. Boros solved this by using a lazy settlement process that defers the position update until the next time users interact with Boros.</p>
<p>Since the last time a user interacted with Boros, multiple events may have occurred that affect their position:</p>
<ul>
<li>Limit orders could have been filled</li>
<li>Floating rate settlements could have occurred</li>
<li>These events can interleave in complex patterns</li>
</ul>
<p>The settlement algorithm processes all pending events in chronological order to ensure correctness:</p>
<ol>
<li>
<p><strong>Event Collection</strong>: Gather all events since the user&#x27;s last settlement:</p>
<ul>
<li>Filled limit orders (grouped by the <code>fTime</code> when they were filled)</li>
<li>Floating payment settlements at each <code>fTime</code> boundary</li>
</ul>
</li>
<li>
<p><strong>Chronological Processing</strong>: Iterate through events by <code>fTime</code>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">For each fTime period:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  a. Process all filled orders from that period</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     - Calculate and apply upfront costs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     - Update position sizes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  b. Process floating payment for that period</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     - Calculate payment based on position size at settlement time</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     - Apply floating index changes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  c. Continue to next fTime period</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>State Update</strong>: After processing all events:</p>
<ul>
<li>Update user&#x27;s final position size</li>
<li>Update user&#x27;s cash balance</li>
<li>Update user&#x27;s last settlement timestamp</li>
</ul>
</li>
</ol>
<p><strong>Example Timeline:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">User last settled: 08:00</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Current time: 18:00</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Events to process:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- 09:30: Limit order filled (100 units)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- 16:00: Floating payment settlement</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- 17:15: Limit order filled (50 units)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Processing order:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1. Process fills from 08:00-16:00 period (100 units)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2. Process Floating payment at 16:00</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3. Process fills from 16:00-24:00 period (50 units)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="notes">Notes<a href="#notes" class="hash-link" aria-label="Direct link to Notes" title="Direct link to Notes">â€‹</a></h2>
<p>Due to lazy settlement, on-chain state may not reflect the latest position values and balances. Query functions ending with <code>NoSettle</code> return raw, unsettled data that may be outdated.</p>
<p><strong>Getting Up-to-Date Data:</strong></p>
<p>To retrieve current, accurate position information, you must first trigger settlement:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">IMarketHub(marketHub).settleAllAndGet(acc, GetRequest.ZERO, MarketId.ZERO);</span><br></span></code></pre></div></div>
<p>You can also use the <a href="/boros-dev/Backend/REST API">REST API</a>, which provides accurate, up-to-date data without requiring manual settlement triggers.</p>
<p><strong>Strategic Position Management:</strong></p>
<p>Floating payments are calculated based on your position size at the exact payment timestamp. This creates an opportunity for strategic position management:</p>
<ul>
<li><strong>Avoiding Payments</strong>: You can close or reduce your position before the payment time to minimize floating payments</li>
<li><strong>Payment Timing</strong>: Payments occur at regular intervals (e.g., every 8 hours)</li>
<li><strong>Position Size Matters</strong>: Only the position size at the payment timestamp is used for calculation</li>
</ul>
<p><strong>Oracle Update Delays:</strong></p>
<p>In practice, Floating payments don&#x27;t occur at the exact period boundaries due to off-chain oracle update delays:</p>
<ul>
<li><strong>Expected Time</strong>: Payment for 8:00:00 boundary</li>
<li><strong>Actual Time</strong>: Usually occurs ~10 seconds later (e.g., 8:00:10)</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/boros-dev/Mechanics/Margin"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ğŸ’° Margin</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/boros-dev/Mechanics/Fees"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ğŸ’µ Fees</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#trade-settlement" class="table-of-contents__link toc-highlight">Trade Settlement</a></li><li><a href="#floating-rate-settlement" class="table-of-contents__link toc-highlight">Floating Rate Settlement</a></li><li><a href="#algorithm" class="table-of-contents__link toc-highlight">Algorithm</a></li><li><a href="#notes" class="table-of-contents__link toc-highlight">Notes</a></li></ul></div></div></div></div></div></main></div></div></div><div class="background_hm_f"><div class="root_DvgA"><div class="linkGroup_Ckfr"><div class="linkGroupTitle_rRS_">Pages</div><a href="https://www.pendle.finance/" target="_blank">Website</a><a href="https://app.pendle.finance/market" target="_blank">App</a></div><div class="linkGroup_Ckfr"><div class="linkGroupTitle_rRS_">Socials</div><a href="https://discord.com/invite/EAujvncY2R" target="_blank">Discord</a><a href="https://twitter.com/pendle_fi/" target="_blank">Twitter</a><a href="https://t.me/pendlefinance/" target="_blank">Telegram</a></div><div class="linkGroup_Ckfr"><div class="linkGroupTitle_rRS_">About Us</div><a href="https://medium.com/pendle/" target="_blank">Medium</a><a href="https://angel.co/company/pendle_finance/" target="_blank">Careers</a><a href="https://pendle.finance/brandguide" target="_blank">Media Kit</a><a href="https://github.com/pendle-finance/pendle-core-v2-public/tree/master/audits" target="_blank">Audits</a></div></div></div></div>
</body>
</html>