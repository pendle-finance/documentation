"use strict";(self.webpackChunkpendle_documentation=self.webpackChunkpendle_documentation||[]).push([[3956],{3905:(e,a,t)=>{t.d(a,{Zo:()=>l,kt:()=>N});var n=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=n.createContext({}),o=function(e){var a=n.useContext(p),t=a;return e&&(t="function"==typeof e?e(a):m(m({},a),e)),t},l=function(e){var a=o(e.components);return n.createElement(p.Provider,{value:a},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},k=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,s=e.originalType,p=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),d=o(t),k=r,N=d["".concat(p,".").concat(k)]||d[k]||c[k]||s;return t?n.createElement(N,m(m({ref:a},l),{},{components:t})):n.createElement(N,m({ref:a},l))}));function N(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var s=t.length,m=new Array(s);m[0]=k;var i={};for(var p in a)hasOwnProperty.call(a,p)&&(i[p]=a[p]);i.originalType=e,i[d]="string"==typeof e?e:r,m[1]=i;for(var o=2;o<s;o++)m[o]=t[o];return n.createElement.apply(null,m)}return n.createElement.apply(null,t)}k.displayName="MDXCreateElement"},7422:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>p,contentTitle:()=>m,default:()=>c,frontMatter:()=>s,metadata:()=>i,toc:()=>o});var n=t(7462),r=(t(7294),t(3905));const s={hide_table_of_contents:!0},m="Yield Tokenization Smart Contracts",i={unversionedId:"Developers/Contracts/YieldTokenization",id:"Developers/Contracts/YieldTokenization",title:"Yield Tokenization Smart Contracts",description:"Overview",source:"@site/docs/Developers/Contracts/YieldTokenization.md",sourceDirName:"Developers/Contracts",slug:"/Developers/Contracts/YieldTokenization",permalink:"/Developers/Contracts/YieldTokenization",draft:!1,tags:[],version:"current",frontMatter:{hide_table_of_contents:!0},sidebar:"myAutogeneratedSidebar",previous:{title:"StandardizedYield (SY)",permalink:"/Developers/Contracts/StandardizedYield"},next:{title:"Pendle Market Smart Contracts",permalink:"/Developers/Contracts/PendleMarket"}},p={},o=[{value:"Overview",id:"overview",level:2},{value:"Key Concepts",id:"key-concepts",level:2},{value:"Technical Details",id:"technical-details",level:2},{value:"Core Logic",id:"core-logic",level:2},{value:"<code>mintPY</code>",id:"mintpy",level:3},{value:"<code>redeemPY</code>",id:"redeempy",level:3},{value:"<code>redeemDueInterestAndRewards</code>",id:"redeemdueinterestandrewards",level:3},{value:"<code>pyIndexCurrent</code>",id:"pyindexcurrent",level:3},{value:"Integration Example",id:"integration-example",level:2},{value:"FAQ",id:"faq",level:2},{value:"When the underlying asset\u2019s exchange rate increases, does Pendle buy more of the asset on the market and distribute it to YT holders?",id:"when-the-underlying-assets-exchange-rate-increases-does-pendle-buy-more-of-the-asset-on-the-market-and-distribute-it-to-yt-holders",level:3},{value:"Is 1 SY always equal to 1 PT + 1 YT?",id:"is-1-sy-always-equal-to-1-pt--1-yt",level:3}],l={toc:o},d="wrapper";function c(e){let{components:a,...s}=e;return(0,r.kt)(d,(0,n.Z)({},l,s,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"yield-tokenization-smart-contracts"},"Yield Tokenization Smart Contracts"),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"This guide explains how Pendle tokenizes yield by splitting assets into PT (Principal Token) and YT (Yield Token), and how the YT contract handles minting and redeeming, index accounting, and the distribution of interest and rewards. This documentation is for developers and partners who want a deep dive into the Pendle yield mechanism and how it works under the hood."),(0,r.kt)("h2",{id:"key-concepts"},"Key Concepts"),(0,r.kt)("p",null,"Yield tokenization takes a yield-bearing asset, then splits that value into two claims with a fixed expiry:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/ProtocolMechanics/YieldTokenization/PT"},"PT (Principal Token)"),": represents the principal of the underlying yield-bearing token."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/ProtocolMechanics/YieldTokenization/YT"},"YT (Yield Token)"),": represents entitlement to all yield, rewards, and points of the asset until expiry.")),(0,r.kt)("p",null,"Example: A user stakes 100 USDe in Ethena and, via Pendle, tokenizes it into 100 PT-USDe and 100 YT-USDe with a 3-month expiry. They can sell the YT-USDe to someone who wants the next three months of yield and points while keeping the PT-USDe to redeem the principal at maturity; assuming a 12% APY (~3% over three months), the position would accrue about 3 USDe - so at expiry the YT-USDe holder is entitled to ~3 USDe of accrued yield (plus any program points earned during that period), and the PT-USDe holder redeems the 100 USDe principal."),(0,r.kt)("h2",{id:"technical-details"},"Technical Details"),(0,r.kt)("p",null,"The Pendle yield-tokenization architecture comprises three core components:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Standardized Yield (SY):")," A unified wrapper interface for yield-bearing assets; underlying yield and rewards accrue to the SY contract."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"YT contract:")," The core logic that splits SY into PT and YT, maintains index accounting, and accrues/distributes yield and rewards."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"PT contract:")," The ERC-20 representing principal; PT is minted/burned by the YT contract and is redeemable for principal at/after maturity.")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"PT and YT Yield Stream",src:t(6187).Z,width:"513",height:"361"})),(0,r.kt)("p",null,"Before splitting, yield-bearing assets are wrapped into SY. To tokenize yield, users deposit SY into the YT contract, which mints PT and YT. The YT contract tracks yield and rewards accrued to the SY and distributes them to YT holders. At maturity, PT holders can redeem their principal from the YT contract."),(0,r.kt)("h2",{id:"core-logic"},"Core Logic"),(0,r.kt)("h3",{id:"mintpy"},(0,r.kt)("a",{parentName:"h3",href:"https://github.com/pendle-finance/pendle-core-v2-public/blob/ba53685767bc16e070136b9dbfe02a5dd6258c61/contracts/core/YieldContracts/PendleYieldToken.sol#L84-L100"},(0,r.kt)("inlineCode",{parentName:"a"},"mintPY"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"/**\n * @notice Tokenize SY into PT + YT of equal qty. Every unit of asset of SY will create 1 PT + 1 YT\n * @dev SY must be transferred to this contract prior to calling\n */\nfunction mintPY(address receiverPT, address receiverYT) external returns (uint256 amountPYOut);\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Purpose"),": Mints equal amounts of PT and YT by depositing SY into the YT contract."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"How it works:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The YT contract mints using its current SY balance. Therefore, you must transfer SY into the YT contract before calling the function. The amount of PT and YT minted is calculated as:")),(0,r.kt)("div",{className:"math math-display"},(0,r.kt)("span",{parentName:"div",className:"katex-display"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"P"),(0,r.kt)("mi",{parentName:"mrow"},"Y"),(0,r.kt)("mtext",{parentName:"mrow"},"\u2005\u200a"),(0,r.kt)("mi",{parentName:"mrow"},"m"),(0,r.kt)("mi",{parentName:"mrow"},"i"),(0,r.kt)("mi",{parentName:"mrow"},"n"),(0,r.kt)("mi",{parentName:"mrow"},"t"),(0,r.kt)("mi",{parentName:"mrow"},"e"),(0,r.kt)("mi",{parentName:"mrow"},"d"),(0,r.kt)("mo",{parentName:"mrow"},"="),(0,r.kt)("mi",{parentName:"mrow"},"S"),(0,r.kt)("mi",{parentName:"mrow"},"Y"),(0,r.kt)("mtext",{parentName:"mrow"},"\u2005\u200a"),(0,r.kt)("mi",{parentName:"mrow"},"d"),(0,r.kt)("mi",{parentName:"mrow"},"e"),(0,r.kt)("mi",{parentName:"mrow"},"p"),(0,r.kt)("mi",{parentName:"mrow"},"o"),(0,r.kt)("mi",{parentName:"mrow"},"s"),(0,r.kt)("mi",{parentName:"mrow"},"i"),(0,r.kt)("mi",{parentName:"mrow"},"t"),(0,r.kt)("mi",{parentName:"mrow"},"e"),(0,r.kt)("mi",{parentName:"mrow"},"d"),(0,r.kt)("mo",{parentName:"mrow"},"\xd7"),(0,r.kt)("mi",{parentName:"mrow"},"c"),(0,r.kt)("mi",{parentName:"mrow"},"u"),(0,r.kt)("mi",{parentName:"mrow"},"r"),(0,r.kt)("mi",{parentName:"mrow"},"r"),(0,r.kt)("mi",{parentName:"mrow"},"e"),(0,r.kt)("mi",{parentName:"mrow"},"n"),(0,r.kt)("mi",{parentName:"mrow"},"t"),(0,r.kt)("mtext",{parentName:"mrow"},"\u2005\u200a"),(0,r.kt)("mi",{parentName:"mrow"},"P"),(0,r.kt)("mi",{parentName:"mrow"},"Y"),(0,r.kt)("mtext",{parentName:"mrow"},"\u2005\u200a"),(0,r.kt)("mi",{parentName:"mrow"},"i"),(0,r.kt)("mi",{parentName:"mrow"},"n"),(0,r.kt)("mi",{parentName:"mrow"},"d"),(0,r.kt)("mi",{parentName:"mrow"},"e"),(0,r.kt)("mi",{parentName:"mrow"},"x")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"PY \\; minted = SY \\; deposited \\times current \\; PY \\; index")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.69444em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"P"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.22222em"}},"Y"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"m"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"i"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"d"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mrel"},"="),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.8888799999999999em",verticalAlign:"-0.19444em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.22222em"}},"Y"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"d"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"p"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"o"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"s"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"i"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"d"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,r.kt)("span",{parentName:"span",className:"mbin"},"\xd7"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.69444em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"c"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"u"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"r"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"r"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"P"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.22222em"}},"Y"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"i"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"d"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"x")))))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The YT contract mints equal quantities of PT and YT to the specified recipient addresses.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If ",(0,r.kt)("inlineCode",{parentName:"li"},"1 SY-sUSDe = 1.2 USDe")," (",(0,r.kt)("inlineCode",{parentName:"li"},"PY index = 1.2"),") and a user deposits ",(0,r.kt)("inlineCode",{parentName:"li"},"100 SY-sUSDe"),", the contract mints ",(0,r.kt)("inlineCode",{parentName:"li"},"120 PT-sUSDe")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"120 YT-sUSDe"),"."),(0,r.kt)("li",{parentName:"ul"},"Since ",(0,r.kt)("inlineCode",{parentName:"li"},"100 SY-sUSDe")," corresponds to ",(0,r.kt)("inlineCode",{parentName:"li"},"120 USDe")," of underlying value, the user receives ",(0,r.kt)("inlineCode",{parentName:"li"},"120 PT-sUSDe")," (principal exposure) and ",(0,r.kt)("inlineCode",{parentName:"li"},"120 YT-sUSDe")," (pre-expiry yield claim).")),(0,r.kt)("h3",{id:"redeempy"},(0,r.kt)("a",{parentName:"h3",href:"https://github.com/pendle-finance/pendle-core-v2-public/blob/ba53685767bc16e070136b9dbfe02a5dd6258c61/contracts/core/YieldContracts/PendleYieldToken.sol#L120-L134"},(0,r.kt)("inlineCode",{parentName:"a"},"redeemPY"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"/**\n * @notice converts PT(+YT) tokens into SY, but interests & rewards are not redeemed at the\n * same time\n * @dev PT/YT must be transferred to this contract prior to calling\n */\nfunction redeemPY(address receiver) external returns (uint256 amountSyOut);\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Purpose:")," Redeem SY by burning PT and YT. Think of this as converting back to the principal accounting unit, while ",(0,r.kt)("strong",{parentName:"p"},"interest and rewards are claimed separately"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"How it works:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You have to provide equal amounts of PT and YT to the YT contract before calling the function."),(0,r.kt)("li",{parentName:"ul"},"The contract burns the tokens and returns SY according to the current PY index:",(0,r.kt)("div",{parentName:"li",className:"math math-display"},(0,r.kt)("span",{parentName:"div",className:"katex-display"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"S"),(0,r.kt)("mi",{parentName:"mrow"},"Y"),(0,r.kt)("mtext",{parentName:"mrow"},"\u2005\u200a"),(0,r.kt)("mi",{parentName:"mrow"},"r"),(0,r.kt)("mi",{parentName:"mrow"},"e"),(0,r.kt)("mi",{parentName:"mrow"},"d"),(0,r.kt)("mi",{parentName:"mrow"},"e"),(0,r.kt)("mi",{parentName:"mrow"},"e"),(0,r.kt)("mi",{parentName:"mrow"},"m"),(0,r.kt)("mi",{parentName:"mrow"},"e"),(0,r.kt)("mi",{parentName:"mrow"},"d"),(0,r.kt)("mo",{parentName:"mrow"},"="),(0,r.kt)("mi",{parentName:"mrow"},"P"),(0,r.kt)("mi",{parentName:"mrow"},"Y"),(0,r.kt)("mtext",{parentName:"mrow"},"\u2005\u200a"),(0,r.kt)("mi",{parentName:"mrow"},"b"),(0,r.kt)("mi",{parentName:"mrow"},"u"),(0,r.kt)("mi",{parentName:"mrow"},"r"),(0,r.kt)("mi",{parentName:"mrow"},"n"),(0,r.kt)("mi",{parentName:"mrow"},"e"),(0,r.kt)("mi",{parentName:"mrow"},"d"),(0,r.kt)("mtext",{parentName:"mrow"},"\u2005\u200a"),(0,r.kt)("mo",{parentName:"mrow"},"\xf7"),(0,r.kt)("mi",{parentName:"mrow"},"c"),(0,r.kt)("mi",{parentName:"mrow"},"u"),(0,r.kt)("mi",{parentName:"mrow"},"r"),(0,r.kt)("mi",{parentName:"mrow"},"r"),(0,r.kt)("mi",{parentName:"mrow"},"e"),(0,r.kt)("mi",{parentName:"mrow"},"n"),(0,r.kt)("mi",{parentName:"mrow"},"t"),(0,r.kt)("mtext",{parentName:"mrow"},"\u2005\u200a"),(0,r.kt)("mi",{parentName:"mrow"},"P"),(0,r.kt)("mi",{parentName:"mrow"},"Y"),(0,r.kt)("mtext",{parentName:"mrow"},"\u2005\u200a"),(0,r.kt)("mi",{parentName:"mrow"},"i"),(0,r.kt)("mi",{parentName:"mrow"},"n"),(0,r.kt)("mi",{parentName:"mrow"},"d"),(0,r.kt)("mi",{parentName:"mrow"},"e"),(0,r.kt)("mi",{parentName:"mrow"},"x")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"SY \\; redeemed = PY \\; burned \\; \\div current \\; PY \\; index")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.69444em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.22222em"}},"Y"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"r"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"d"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"m"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"d"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mrel"},"="),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.77777em",verticalAlign:"-0.08333em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"P"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.22222em"}},"Y"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"b"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"u"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"r"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"d"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,r.kt)("span",{parentName:"span",className:"mbin"},"\xf7"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.69444em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"c"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"u"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"r"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"r"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"P"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.22222em"}},"Y"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"i"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"d"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"))))))),(0,r.kt)("li",{parentName:"ul"},"The redeemed SY is sent to the specified receiver. Note that interest and rewards accrued to YT are not included in this redemption.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Notes:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Pre-expiry:")," both PT and YT are required to redeem SY."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Post-expiry:")," only PT is required (YT has no value after maturity).")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example:")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Pre-expiry")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Continuing the prior example: if the user holds ",(0,r.kt)("inlineCode",{parentName:"li"},"120 PT-sUSDe")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"120 YT-sUSDe"),", and now the PY index is ",(0,r.kt)("inlineCode",{parentName:"li"},"1.25"),", then\n",(0,r.kt)("inlineCode",{parentName:"li"},"SY_out = 120 / 1.25 = 96 SY-sUSDe")," (which corresponds to ",(0,r.kt)("strong",{parentName:"li"},"120 USDe"),").\nInterest and rewards accrued to YT are ",(0,r.kt)("strong",{parentName:"li"},"not")," included in this redemption.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Post-expiry")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"After maturity, with ",(0,r.kt)("inlineCode",{parentName:"li"},"120 PT-sUSDe")," and PY index ",(0,r.kt)("inlineCode",{parentName:"li"},"1.25"),",\n",(0,r.kt)("inlineCode",{parentName:"li"},"SY_out = 120 / 1.25 = 96 SY-sUSDe")," (again equal to ",(0,r.kt)("strong",{parentName:"li"},"120 USDe"),").\nThe user receives ",(0,r.kt)("inlineCode",{parentName:"li"},"96 SY-sUSDe"),", which can be unwrapped or swapped back to the underlying ",(0,r.kt)("strong",{parentName:"li"},"120 USDe")," principal.")),(0,r.kt)("h3",{id:"redeemdueinterestandrewards"},(0,r.kt)("a",{parentName:"h3",href:"https://github.com/pendle-finance/pendle-core-v2-public/blob/ba53685767bc16e070136b9dbfe02a5dd6258c61/contracts/core/YieldContracts/PendleYieldToken.sol#L150-L186"},(0,r.kt)("inlineCode",{parentName:"a"},"redeemDueInterestAndRewards"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"/**\n * @notice Redeems interests and rewards for `user`\n * @param redeemInterest will only transfer out interest for user if true\n * @param redeemRewards will only transfer out rewards for user if true\n * @dev With YT yielding interest in the form of SY, which is redeemable by users, the reward\n * distribution should be based on the amount of SYs that their YT currently represent, plus\n * their dueInterest. It has been proven and tested that _rewardSharesUser will not change over\n * time, unless users redeem their dueInterest or redeemPY. Due to this, it is required to\n * update users' accruedReward STRICTLY BEFORE transferring out their interest.\n */\nfunction redeemDueInterestAndRewards(\n    address user,\n    bool redeemInterest,\n    bool redeemRewards\n) external returns (uint256 interestOut, uint256[] memory rewardsOut);\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Purpose:")," Allows a YT holder to claim accrued earnings: interest (in SY) and any external reward tokens. Interest for YT is ",(0,r.kt)("strong",{parentName:"p"},"always paid in SY"),", but it can be swapped into your preferred token through the ",(0,r.kt)("a",{parentName:"p",href:"/Developers/Contracts/PendleRouter/ApiReference/MiscFunctions#redeemdueinterestandrewardsv2"},"router"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Behavior notes:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Interest unit:")," Always ",(0,r.kt)("strong",{parentName:"p"},"SY"),". If you want the underlying/base asset, unwrap or swap through the ",(0,r.kt)("a",{parentName:"p",href:"/Developers/Contracts/PendleRouter/ApiReference/MiscFunctions#redeemdueinterestandrewardsv2"},"router"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Pre- vs post-expiry:")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Pre-expiry: interest and rewards continue accruing; this function pays whatever is due up to the call."),(0,r.kt)("li",{parentName:"ul"},"Post-expiry: YT no longer earns new yield. Calling still pays any ",(0,r.kt)("strong",{parentName:"li"},"remaining")," pre-expiry interest/rewards, if any."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Zero-flag calls:")," If both flags are ",(0,r.kt)("inlineCode",{parentName:"p"},"false"),", no tokens are transferred (effectively a no-op, except for index synchronization)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Token order:")," ",(0,r.kt)("inlineCode",{parentName:"p"},"rewardsOut[i]")," corresponds to ",(0,r.kt)("inlineCode",{parentName:"p"},"getRewardTokens()[i]"),". Always read the list first."))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Examples:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Claim both:"),"\nUser has accrued ",(0,r.kt)("inlineCode",{parentName:"li"},"2.5 SY")," of interest and ",(0,r.kt)("inlineCode",{parentName:"li"},"[10 X, 0.3 Y]")," rewards. Calling with ",(0,r.kt)("inlineCode",{parentName:"li"},"(true, true)")," returns ",(0,r.kt)("inlineCode",{parentName:"li"},"(2.5, [10, 0.3])"),", transfers those amounts, and resets baselines."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Claim rewards only:"),"\nCalling ",(0,r.kt)("inlineCode",{parentName:"li"},"(false, true)")," transfers only rewards. Due interest remains in SY terms and continues to count toward reward-share until it\u2019s eventually claimed or the user redeems PY.")),(0,r.kt)("h3",{id:"pyindexcurrent"},(0,r.kt)("a",{parentName:"h3",href:"https://github.com/pendle-finance/pendle-core-v2-public/blob/ba53685767bc16e070136b9dbfe02a5dd6258c61/contracts/core/YieldContracts/PendleYieldToken.sol#L226-L236"},(0,r.kt)("inlineCode",{parentName:"a"},"pyIndexCurrent"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"/**\n * @notice updates and returns the current PY index\n * @dev this function maximizes the current PY index with the previous index, guaranteeing\n * non-decreasing PY index\n * @dev if `doCacheIndexSameBlock` is true, PY index only updates at most once per block,\n * and has no state changes on the second call onwards (within the same block).\n * @dev see `pyIndexStored()` for view function for cached value.\n */\nfunction pyIndexCurrent() external returns (uint256 currentIndex);\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Purpose:")," Returns the ",(0,r.kt)("strong",{parentName:"p"},"current PY index"),", updating it if needed. The PY index tracks the SY exchange rate and is stored ",(0,r.kt)("strong",{parentName:"p"},"monotonically")," (never decreases).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Behavior notes:")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The PY index is ",(0,r.kt)("strong",{parentName:"p"},"non-decreasing"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"pyIndexCurrent = max(SY.exchangeRate(), pyIndexStored)"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"If ",(0,r.kt)("inlineCode",{parentName:"p"},"doCacheIndexSameBlock")," is enabled, the index is updated ",(0,r.kt)("strong",{parentName:"p"},"at most once per block"),"; subsequent calls in the same block are read-only (no further state changes).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"If ",(0,r.kt)("inlineCode",{parentName:"p"},"SY.exchangeRate()")," falls below the stored index (negative yield), the PY index ",(0,r.kt)("strong",{parentName:"p"},"does not")," move down. Consequences:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Pre-expiry redemptions return ",(0,r.kt)("strong",{parentName:"li"},"less SY per PY")," until ",(0,r.kt)("inlineCode",{parentName:"li"},"SY.exchangeRate()")," recovers above the stored index."),(0,r.kt)("li",{parentName:"ul"},"YT accrual effectively ",(0,r.kt)("strong",{parentName:"li"},"pauses")," (no new interest) until recovery."),(0,r.kt)("li",{parentName:"ul"},"In sustained drawdowns, even PT\u2019s eventual redemption (valued in the accounting asset) can be ",(0,r.kt)("strong",{parentName:"li"},"less than previously expected")," because the SY backing has shrunk. See ",(0,r.kt)("a",{parentName:"li",href:"/ProtocolMechanics/NegativeYield"},"Negative Yield"),"."))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Examples:")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Up move:")," Last stored ",(0,r.kt)("inlineCode",{parentName:"li"},"SY.exchangeRate()")," = ",(0,r.kt)("inlineCode",{parentName:"li"},"1.20"),"; it rises to ",(0,r.kt)("inlineCode",{parentName:"li"},"1.25"),". Calling ",(0,r.kt)("inlineCode",{parentName:"li"},"pyIndexCurrent()")," updates the PY index to ",(0,r.kt)("inlineCode",{parentName:"li"},"1.25"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Down move:")," Last stored index = ",(0,r.kt)("inlineCode",{parentName:"li"},"1.20"),"; ",(0,r.kt)("inlineCode",{parentName:"li"},"SY.exchangeRate()")," drops to ",(0,r.kt)("inlineCode",{parentName:"li"},"1.15"),". The PY index ",(0,r.kt)("strong",{parentName:"li"},"stays at ",(0,r.kt)("inlineCode",{parentName:"strong"},"1.20")),".\nIf a user minted ",(0,r.kt)("strong",{parentName:"li"},"120 PT")," when the index was ",(0,r.kt)("inlineCode",{parentName:"li"},"1.20"),", their claim on SY is ",(0,r.kt)("inlineCode",{parentName:"li"},"120 / 1.20 = 100 SY"),".\nAt maturity, if each SY equals ",(0,r.kt)("inlineCode",{parentName:"li"},"1.15 USDe"),", they redeem ",(0,r.kt)("inlineCode",{parentName:"li"},"100 \xd7 1.15 = 115 USDe")," (less than 120 USDe), reflecting the underlying negative yield.")))),(0,r.kt)("h2",{id:"integration-example"},"Integration Example"),(0,r.kt)("admonition",{title:"Example code only",type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"The snippets below are simplified for illustration and ",(0,r.kt)("strong",{parentName:"p"},"are not audited"),".",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Do not")," use them in production or with real funds. If you adapt any example,\nconduct a full review, add comprehensive tests, and obtain an independent ",(0,r.kt)("strong",{parentName:"p"},"security audit"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\nIPYieldToken yt;\nIStandardizedYield sy = IStandardizedYield(yt.SY());\nIPrincipalToken pt = IPrincipalToken(yt.PT());\n\naddress receiver;\n\n\n// Minting PT + YT by depositing SY\nIERC20(address(sy)).transfer(address(yt), 100e18); // deposit 100 SY\nuint256 amountPYOut = yt.mintPY(receiver, receiver); // receive PT + YT\n\n\n// Redeeming SY by burning PT + YT (pre-expiry)\nIERC20(address(pt)).transfer(address(yt), amountPYOut); // send PT\nIERC20(address(yt)).transfer(address(yt), amountPYOut); // send YT\nuint256 amountSyOut = yt.redeemPY(receiver); // receive SY\n\n// Redeeming SY by burning PT only (post-expiry)\nIERC20(address(pt)).transfer(address(yt), amountPYOut); // send PT\nuint256 amountSyOut = yt.redeemPY(receiver); // receive SY\n\n\n// Claiming accrued interest (in SY) and rewards (in reward tokens)\n(uint256 interestOut, uint256[] memory rewardsOut) = yt.redeemDueInterestAndRewards(\n    receiver,\n    true,  // claim interest\n    true   // claim rewards\n);\n")),(0,r.kt)("h2",{id:"faq"},"FAQ"),(0,r.kt)("h3",{id:"when-the-underlying-assets-exchange-rate-increases-does-pendle-buy-more-of-the-asset-on-the-market-and-distribute-it-to-yt-holders"},"When the underlying asset\u2019s exchange rate increases, does Pendle buy more of the asset on the market and distribute it to YT holders?"),(0,r.kt)("p",null,"No. Pendle\u2019s accounting is ",(0,r.kt)("strong",{parentName:"p"},"index-based"),": yield accrues inside the ",(0,r.kt)("strong",{parentName:"p"},"SY")," balance held by the contracts as ",(0,r.kt)("inlineCode",{parentName:"p"},"exchangeRate")," rises. ",(0,r.kt)("strong",{parentName:"p"},"YT")," holders are entitled to the yield portion of that ",(0,r.kt)("strong",{parentName:"p"},"existing SY collateral")," (paid in SY), while ",(0,r.kt)("strong",{parentName:"p"},"PT")," holders claim principal at/after maturity; users can then unwrap or swap SY to the base asset if they wish. No open-market purchases are required."),(0,r.kt)("h3",{id:"is-1-sy-always-equal-to-1-pt--1-yt"},"Is 1 SY always equal to 1 PT + 1 YT?"),(0,r.kt)("p",null,"No. ",(0,r.kt)("strong",{parentName:"p"},"PT")," is a principal claim ",(0,r.kt)("strong",{parentName:"p"},"in units of the accounting asset at maturity"),", whereas ",(0,r.kt)("strong",{parentName:"p"},"SY")," is a wrapper whose value floats with ",(0,r.kt)("inlineCode",{parentName:"p"},"exchangeRate"),"; ",(0,r.kt)("strong",{parentName:"p"},"YT")," represents the pre-expiry yield claim. The amounts of PT and YT you mint depend on the ",(0,r.kt)("strong",{parentName:"p"},"current index")," - they collectively replicate the economic exposure of the underlying, but ",(0,r.kt)("strong",{parentName:"p"},"1 SY \u2260 1 PT + 1 YT")," except in edge cases (e.g., ",(0,r.kt)("inlineCode",{parentName:"p"},"exchangeRate == 1"),")."))}c.isMDXComponent=!0},6187:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/sy_pt_yt_yield_stream-8f443485f597fa9ee0246701254e902f.png"}}]);