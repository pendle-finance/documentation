"use strict";(self.webpackChunkpendle_documentation=self.webpackChunkpendle_documentation||[]).push([[4807],{8453:(e,r,t)=>{t.d(r,{R:()=>a,x:()=>s});var i=t(6540);const n={},d=i.createContext(n);function a(e){const r=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),i.createElement(d.Provider,{value:r},e.children)}},9087:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>o,contentTitle:()=>s,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"Developers/LimitOrder/CreateALimitOrder","title":"Create a Limit Order","description":"Pendle Limit Order systems allows makers to create limit orders without using gas. To achieve this, makers\'s signed orders are stored off-chain and will be filled by the takers on-chain.","source":"@site/docs/pendle-v2/Developers/LimitOrder/CreateALimitOrder.md","sourceDirName":"Developers/LimitOrder","slug":"/Developers/LimitOrder/CreateALimitOrder","permalink":"/pendle-v2/Developers/LimitOrder/CreateALimitOrder","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"myAutogeneratedSidebar","previous":{"title":"Limit Order Contract","permalink":"/pendle-v2/Developers/LimitOrder/LimitOrderContract"},"next":{"title":"Cancel Limit Orders","permalink":"/pendle-v2/Developers/LimitOrder/CancelOrders"}}');var n=t(4848),d=t(8453);const a={},s="Create a Limit Order",o={},l=[{value:"Step 1: Generate limit order data",id:"step-1-generate-limit-order-data",level:3},{value:"Step 2: Sign limit order data",id:"step-2-sign-limit-order-data",level:3},{value:"Step 3: Post the limit order",id:"step-3-post-the-limit-order",level:3}];function c(e){const r={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,d.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"create-a-limit-order",children:"Create a Limit Order"})}),"\n",(0,n.jsx)(r.p,{children:"Pendle Limit Order systems allows makers to create limit orders without using gas. To achieve this, makers's signed orders are stored off-chain and will be filled by the takers on-chain."}),"\n",(0,n.jsx)(r.p,{children:"To be able to create a limit order and submit it to the Pendle Limit Order system, you can follow these steps:"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"Generate the limit order data"}),"\n",(0,n.jsx)(r.li,{children:"Sign the limit order data"}),"\n",(0,n.jsx)(r.li,{children:"Post the limit order data and its signature to the Pendle Limit Order system"}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"Pendle expose 2 APIs to support maker create order easier"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://api-v2.pendle.finance/limit-order/docs#/Maker/MakersController_generateLimitOrderData",children:"Generate limit order data"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"https://api-v2.pendle.finance/limit-order/docs#/Maker/MakersController_createOrder",children:"Post limit order"})}),"\n"]}),"\n",(0,n.jsx)(r.h1,{id:"typescript-example",children:"Typescript example"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Note:"}),": The code examples in the guide below are taken from our demo GitHub repository, which demonstrates the complete end-to-end Limit Order processes in a TypeScript environment."]}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"https://github.com/pendle-finance/pendle-examples-public/tree/main/limit-order-api-demo",children:"Repo"})}),"\n",(0,n.jsx)(r.h3,{id:"step-1-generate-limit-order-data",children:"Step 1: Generate limit order data"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.a,{href:"/pendle-v2/Developers/LimitOrder/LimitOrderContract#order-struct-definition",children:"Order data definition"})}),"\n",(0,n.jsxs)(r.p,{children:["To place a limit order, maker need to generate this Order struct, which requires several details. Pendle provides a backend API that helps generate this data more easily. By providing the necessary information (",(0,n.jsx)(r.code,{children:"orderType"}),", ",(0,n.jsx)(r.code,{children:"token"}),", ",(0,n.jsx)(r.code,{children:"maker"}),", ",(0,n.jsx)(r.code,{children:"impliedAPY"}),"), the API returns the full limit order data for the maker."]}),"\n",(0,n.jsxs)(r.p,{children:["Maker can generate the complete data yourself, but the API simplifies the process by handling complex fields like ",(0,n.jsx)(r.code,{children:"salt"}),", ",(0,n.jsx)(r.code,{children:"failSafeRate"}),", ",(0,n.jsx)(r.code,{children:"nonce"}),", etc."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"const requestBody: GenerateLimitOrderDataRequest = {\n  chainId: ChainId.ARBITRUM,\n  YT: aUSDC_MARKET.yt,\n  maker: signerAddress,\n  orderType: LimitOrderType.TOKEN_FOR_PT,\n  token: aUSDC_MARKET.tokenIn.usdc, // Use USDC as token in to swap to PT\n  makingAmount: '10000000', // 10 USDC\n  impliedApy: 0.1, // 10% implied APY\n  expiry: String(Math.floor(Date.now() / 1000) + 20 * 60), // order will be expired in 20 minutes\n};\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Full details of all limit order data can be found via the ",(0,n.jsx)(r.code,{children:"GenerateLimitOrderDataResponse"})," on our ",(0,n.jsx)(r.a,{href:"https://api-v2.pendle.finance/limit-order/docs#/",children:"API specification"})]}),"\n",(0,n.jsx)(r.p,{children:"Note that you need to ensure you have sufficient balance and allowance to create the limit order; otherwise, the API will return a 400 error."}),"\n",(0,n.jsx)(r.h3,{id:"step-2-sign-limit-order-data",children:"Step 2: Sign limit order data"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"const signature = await signer.signTypedData(limitOrderDomainArbitrum, typesLimitOrder, data);\n"})}),"\n",(0,n.jsxs)(r.p,{children:["You can find the full example of signing a limit order using ethersjs library on our ",(0,n.jsx)(r.a,{href:"https://github.com/pendle-finance/pendle-examples-public/tree/main/limit-order-api-demo",children:"API demo repository"})]}),"\n",(0,n.jsx)(r.h3,{id:"step-3-post-the-limit-order",children:"Step 3: Post the limit order"}),"\n",(0,n.jsx)(r.p,{children:"After sign the limit order data, you can send the limit order data along with the signature to our Backend API"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"const requestBody: CreateLimitOrderRequest = {\n  ...generatedLimitOrderData,\n  yt: generatedLimitOrderData.YT,\n  type: generatedLimitOrderData.orderType,\n  signature,\n};\n"})}),"\n",(0,n.jsxs)(r.p,{children:["All the implementation details can be found in the ",(0,n.jsx)(r.a,{href:"https://github.com/pendle-finance/pendle-examples-public/tree/main/limit-order-api-demo",children:"API demo repository"})]})]})}function m(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}}}]);