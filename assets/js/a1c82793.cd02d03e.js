"use strict";(self.webpackChunkpendle_documentation=self.webpackChunkpendle_documentation||[]).push([[129],{296:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/limit_order_callback_flow-bcca747a2640e9e901a6987f45b6ee20.png"},8441:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Developers/LimitOrder/LimitOrderContract","title":"Limit Order Contract","description":"The Limit Order contract is where limit orders are settled, allowing orders to be generated off-chain and settled on-chain.","source":"@site/docs/pendle-v2/Developers/LimitOrder/LimitOrderContract.md","sourceDirName":"Developers/LimitOrder","slug":"/Developers/LimitOrder/LimitOrderContract","permalink":"/pendle-v2/Developers/LimitOrder/LimitOrderContract","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"myAutogeneratedSidebar","previous":{"title":"Unit, Decimals and Scaled18","permalink":"/pendle-v2/Developers/Contracts/UnitAndDecimals"},"next":{"title":"Create a Limit Order","permalink":"/pendle-v2/Developers/LimitOrder/CreateALimitOrder"}}');var s=r(4848),a=r(8453);const t={},l="Limit Order Contract",c={},d=[{value:"Order Struct Definition",id:"order-struct-definition",level:2},{value:"Field Explanations",id:"field-explanations",level:2},{value:"Method Definitions",id:"method-definitions",level:2},{value:"hashOrder",id:"hashorder",level:3},{value:"Parameters:",id:"parameters",level:4},{value:"Returns:",id:"returns",level:4},{value:"cancelSingle",id:"cancelsingle",level:3},{value:"Parameters:",id:"parameters-1",level:4},{value:"cancelBatch",id:"cancelbatch",level:3},{value:"Parameters:",id:"parameters-2",level:4},{value:"orderStatusesRaw",id:"orderstatusesraw",level:3},{value:"Parameters:",id:"parameters-3",level:4},{value:"Returns:",id:"returns-1",level:4},{value:"fill",id:"fill",level:3},{value:"Parameters:",id:"parameters-4",level:4},{value:"Returns:",id:"returns-2",level:4},{value:"Callback Mechanism",id:"callback-mechanism",level:2},{value:"Callback Interface",id:"callback-interface",level:3},{value:"Parameters:",id:"parameters-5",level:4},{value:"Returns:",id:"returns-3",level:4},{value:"Callback Flow and Arbitrage Use Cases",id:"callback-flow-and-arbitrage-use-cases",level:3}];function o(e){const n={a:"a",annotation:"annotation",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msup:"msup",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"limit-order-contract",children:"Limit Order Contract"})}),"\n",(0,s.jsx)(n.p,{children:"The Limit Order contract is where limit orders are settled, allowing orders to be generated off-chain and settled on-chain."}),"\n",(0,s.jsx)(n.p,{children:"The Limit Order contract provides methods to support:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Makers canceling their orders."}),"\n",(0,s.jsx)(n.li,{children:"Takers filling orders."}),"\n",(0,s.jsx)(n.li,{children:"A callback function to support arbitrageurs arbitraging limit orders."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You can find the contract's implementation ",(0,s.jsx)(n.a,{href:"https://github.com/pendle-finance/pendle-core-v2/tree/main/contracts/limit",children:"here"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"order-struct-definition",children:"Order Struct Definition"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sol",children:"interface IPLimitOrderType {\n    enum OrderType {\n        SY_FOR_PT,\n        PT_FOR_SY,\n        SY_FOR_YT,\n        YT_FOR_SY\n    }\n}\n\nstruct Order {\n    uint256 salt;\n    uint256 expiry;\n    uint256 nonce;\n    IPLimitOrderType.OrderType orderType;\n    address token;\n    address YT;\n    address maker;\n    address receiver;\n    uint256 makingAmount;\n    uint256 lnImpliedRate;\n    uint256 failSafeRate;\n    bytes permit;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You can find the contract's implementation ",(0,s.jsx)(n.a,{href:"https://github.com/pendle-finance/pendle-core-v2/tree/main/contracts/limit",children:"here"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"field-explanations",children:"Field Explanations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"salt"}),": A randomly generated number that differentiates between orders."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"expiry"}),": The expiration timestamp of the order. Orders cannot be settled on-chain after this point."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"nonce"}),": This field allows makers to cancel all their created orders by simply increasing the nonce. All orders with a nonce less than the current nonce will be invalid. Orders are typically created with a nonce equal to the current nonce at the time of creation."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"orderType"}),": Indicates the type of trade. There are four types of limit orders:","\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"SY_FOR_PT"}),": Swap SY (or another SY's token in) for PT."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"PT_FOR_SY"}),": Swap PT for SY (or another SY's token out)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"SY_FOR_YT"}),": Swap SY (or another SY's token in) for YT."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"YT_FOR_SY"}),": Swap YT for SY (or another SY's token out)."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"token"}),": Specifies which token to use for the order. If the orderType is SY_FOR_PT or SY_FOR_YT, this is the token-in address. Otherwise, it's the token-out address."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"YT"}),": The YT address for this limit order. From this address, you can derive the SY and PT addresses."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"maker"}),": The address of the maker who created the order."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"receiver"}),": The address of the receiver, who will get the output amount if the order is settled."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"makingAmount"}),": The amount of input token used to create the order. If the orderType is SY_FOR_PT or SY_FOR_YT, the makingAmount is the SY amount. If PT_FOR_SY or YT_FOR_SY, it refers to the PT or YT amount, respectively."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"lnImpliedRate"}),": The natural logarithm of the implied rate, formatted as a uint256 by multiplying by 10^18 and then rounding to an integer. You can find the actual implied APY with the formula: ",(0,s.jsxs)(n.span,{className:"katex",children:[(0,s.jsx)(n.span,{className:"katex-mathml",children:(0,s.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,s.jsxs)(n.semantics,{children:[(0,s.jsxs)(n.mrow,{children:[(0,s.jsx)(n.mi,{children:"e"}),(0,s.jsx)(n.mi,{children:"x"}),(0,s.jsx)(n.mi,{children:"p"}),(0,s.jsx)(n.mo,{stretchy:"false",children:"("}),(0,s.jsx)(n.mi,{children:"l"}),(0,s.jsx)(n.mi,{children:"n"}),(0,s.jsx)(n.mi,{children:"I"}),(0,s.jsx)(n.mi,{children:"m"}),(0,s.jsx)(n.mi,{children:"p"}),(0,s.jsx)(n.mi,{children:"l"}),(0,s.jsx)(n.mi,{children:"i"}),(0,s.jsx)(n.mi,{children:"e"}),(0,s.jsx)(n.mi,{children:"d"}),(0,s.jsx)(n.mi,{children:"R"}),(0,s.jsx)(n.mi,{children:"a"}),(0,s.jsx)(n.mi,{children:"t"}),(0,s.jsx)(n.mi,{children:"e"}),(0,s.jsx)(n.mi,{mathvariant:"normal",children:"/"}),(0,s.jsxs)(n.msup,{children:[(0,s.jsx)(n.mn,{children:"10"}),(0,s.jsx)(n.mn,{children:"18"})]}),(0,s.jsx)(n.mo,{stretchy:"false",children:")"}),(0,s.jsx)(n.mo,{children:"\u2212"}),(0,s.jsx)(n.mn,{children:"1"})]}),(0,s.jsx)(n.annotation,{encoding:"application/x-tex",children:"exp(lnImpliedRate/10^{18}) - 1"})]})})}),(0,s.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,s.jsxs)(n.span,{className:"base",children:[(0,s.jsx)(n.span,{className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),(0,s.jsx)(n.span,{className:"mord mathnormal",children:"e"}),(0,s.jsx)(n.span,{className:"mord mathnormal",children:"x"}),(0,s.jsx)(n.span,{className:"mord mathnormal",children:"p"}),(0,s.jsx)(n.span,{className:"mopen",children:"("}),(0,s.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,s.jsx)(n.span,{className:"mord mathnormal",children:"n"}),(0,s.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"I"}),(0,s.jsx)(n.span,{className:"mord mathnormal",children:"m"}),(0,s.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"pl"}),(0,s.jsx)(n.span,{className:"mord mathnormal",children:"i"}),(0,s.jsx)(n.span,{className:"mord mathnormal",children:"e"}),(0,s.jsx)(n.span,{className:"mord mathnormal",children:"d"}),(0,s.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,s.jsx)(n.span,{className:"mord mathnormal",children:"a"}),(0,s.jsx)(n.span,{className:"mord mathnormal",children:"t"}),(0,s.jsx)(n.span,{className:"mord mathnormal",children:"e"}),(0,s.jsx)(n.span,{className:"mord",children:"/1"}),(0,s.jsxs)(n.span,{className:"mord",children:[(0,s.jsx)(n.span,{className:"mord",children:"0"}),(0,s.jsx)(n.span,{className:"msupsub",children:(0,s.jsx)(n.span,{className:"vlist-t",children:(0,s.jsx)(n.span,{className:"vlist-r",children:(0,s.jsx)(n.span,{className:"vlist",style:{height:"0.8141em"},children:(0,s.jsxs)(n.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,s.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,s.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,s.jsx)(n.span,{className:"mord mtight",children:(0,s.jsx)(n.span,{className:"mord mtight",children:"18"})})})]})})})})})]}),(0,s.jsx)(n.span,{className:"mclose",children:")"}),(0,s.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,s.jsx)(n.span,{className:"mbin",children:"\u2212"}),(0,s.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,s.jsxs)(n.span,{className:"base",children:[(0,s.jsx)(n.span,{className:"strut",style:{height:"0.6444em"}}),(0,s.jsx)(n.span,{className:"mord",children:"1"})]})]})]}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"failSafeRate"}),": If at the time the limit order is settled, the rate of converting input token to SY or converting from SY to output token (based on the type of order) is lower than this failSafeRate, the order will not be settled."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"permit"}),": Reserved for future use."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"method-definitions",children:"Method Definitions"}),"\n",(0,s.jsx)(n.h3,{id:"hashorder",children:"hashOrder"}),"\n",(0,s.jsx)(n.p,{children:"This function returns a unique hash for a given order, allowing you to get the order's status later."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sol",children:"function hashOrder(Order memory order) external view returns (bytes32);\n"})}),"\n",(0,s.jsx)(n.h4,{id:"parameters",children:"Parameters:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"order"}),": The order to be hashed."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"returns",children:"Returns:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The unique hash of the order."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"cancelsingle",children:"cancelSingle"}),"\n",(0,s.jsx)(n.p,{children:"This method cancels a specific limit order. Once canceled, the order cannot be filled or settled."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sol",children:"function cancelSingle(Order calldata order) external;\n"})}),"\n",(0,s.jsx)(n.h4,{id:"parameters-1",children:"Parameters:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"order"}),": The limit order to be canceled."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"cancelbatch",children:"cancelBatch"}),"\n",(0,s.jsx)(n.p,{children:"This method allows you to cancel multiple limit orders in a single transaction."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sol",children:"function cancelBatch(Order[] calldata orders) external;\n"})}),"\n",(0,s.jsx)(n.h4,{id:"parameters-2",children:"Parameters:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"orders"}),": An array of limit orders to be canceled."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"orderstatusesraw",children:"orderStatusesRaw"}),"\n",(0,s.jsx)(n.p,{children:"This method retrieves raw remaining and filled amounts for specified orders."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sol",children:"function orderStatusesRaw(\n    bytes32[] memory orderHashes\n) external view returns (uint256[] memory remainingsRaw, uint256[] memory filledAmounts);\n"})}),"\n",(0,s.jsx)(n.h4,{id:"parameters-3",children:"Parameters:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"orderHashes"}),": An array of hashes identifying the orders for which statuses are requested."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"returns-1",children:"Returns:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"remainingsRaw"}),": The raw remaining amounts for each order. If ",(0,s.jsx)(n.code,{children:"remainingsRaw"})," is zero, the order is unknown to the contract. To distinguish between unknown orders and fully filled orders, known orders have ",(0,s.jsx)(n.code,{children:"remainingsRaw"})," increased by one. For example, if an order has a real remaining of ",(0,s.jsx)(n.code,{children:"100"}),", its ",(0,s.jsx)(n.code,{children:"remainingsRaw"})," will be ",(0,s.jsx)(n.code,{children:"101"}),". Fully filled or canceled orders will have ",(0,s.jsx)(n.code,{children:"remainingsRaw"})," set to one."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"filledAmounts"}),": The filled amounts for each order."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"fill",children:"fill"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"fill"})," function allows you to fill one or more limit orders. This is a key operation in a limit order system, where takers fill the orders submitted by makers. It has several parameters and returns multiple values, indicating the outcome of the fill operation."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sol",children:"function fill(\n        FillOrderParams[] memory params,\n        address receiver,\n        uint256 maxTaking,\n        bytes calldata optData,\n        bytes calldata callback\n    ) external returns (uint256 actualMaking, uint256 actualTaking, uint256 totalFee, bytes memory callbackReturn);\n"})}),"\n",(0,s.jsx)(n.h4,{id:"parameters-4",children:"Parameters:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"params"}),": An array of ",(0,s.jsx)(n.code,{children:"FillOrderParams"}),", specifying the orders to be filled, including order data, signatures, and the amount the taker intends to fill."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"receiver"}),": The address that receives the output tokens when the orders are filled, typically the taker's address."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"maxTaking"}),": The maximum amount of tokens that can be taken from the taker."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"optData"}),": Reserved for future use. Pass empty bytes (",(0,s.jsx)(n.code,{children:"'0x'"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"callback"}),": Optional callback data for executing additional logic. For most cases, you can pass empty bytes. See the callback part below for more details."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"returns-2",children:"Returns:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"actualMaking"}),": The total amount of tokens received by the taker from the fill operation."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"actualTaking"}),": The total amount of tokens taken from the taker to complete the fill operation."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"totalFee"}),": The total fee incurred during the fill operation."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"callbackReturn"}),": Data returned from the callback function, if used."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"callback-mechanism",children:"Callback Mechanism"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"fill"})," function supports a callback mechanism for executing additional logic during the filling process, making it versatile for arbitrage and other custom operations."]}),"\n",(0,s.jsx)(n.h3,{id:"callback-interface",children:"Callback Interface"}),"\n",(0,s.jsx)(n.p,{children:"The callback mechanism allows additional logic to be executed during the fill operation. Here's the interface for the callback function:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sol",children:"interface IPLimitRouterCallback {\n    function limitRouterCallback(\n        uint256 actualMaking,\n        uint256 actualTaking,\n        uint256 totalFee,\n        bytes memory data\n    ) external returns (bytes memory);\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"parameters-5",children:"Parameters:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"actualMaking"}),": The amount of tokens received by the taker's contract from the fill operation. This amount is in SY if the orderType is ",(0,s.jsx)(n.code,{children:"SY_FOR_PT"})," or ",(0,s.jsx)(n.code,{children:"SY_FOR_YT"}),", in PT if it's ",(0,s.jsx)(n.code,{children:"PT_FOR_SY"}),", and in YT if it's ",(0,s.jsx)(n.code,{children:"YT_FOR_SY"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"actualTaking"}),": The amount of tokens the taker's contract must send to the limit order router to complete the fill. This amount is in SY if ",(0,s.jsx)(n.code,{children:"PT_FOR_SY"})," or ",(0,s.jsx)(n.code,{children:"YT_FOR_SY"}),", in PT if it's ",(0,s.jsx)(n.code,{children:"SY_FOR_PT"}),", and in YT if it's ",(0,s.jsx)(n.code,{children:"SY_FOR_YT"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"totalFee"}),": The total fee for the operation."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"data"}),": Additional data provided during the ",(0,s.jsx)(n.code,{children:"fill"})," operation. This corresponds to the callback parameter in the ",(0,s.jsx)(n.code,{children:"fill"})," function."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"returns-3",children:"Returns:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"bytes"}),": Optional return data from the callback function."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"callback-flow-and-arbitrage-use-cases",children:"Callback Flow and Arbitrage Use Cases"}),"\n",(0,s.jsx)(n.p,{children:"The callback mechanism enables complex interactions and arbitrage opportunities. Here's a simplified flow for using the callback feature:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Taker Contract Calls ",(0,s.jsx)(n.code,{children:"fill"})]}),": The ",(0,s.jsx)(n.code,{children:"fill"})," function is called with the specified parameters and the callback data."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tokens Are Transferred"}),": The ",(0,s.jsx)(n.code,{children:"actualMaking"})," amount is transferred to the receiver (typically the taker's contract)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Callback Function Is Invoked"}),": The callback function (",(0,s.jsx)(n.code,{children:"limitRouterCallback"}),") is called with the ",(0,s.jsx)(n.code,{children:"actualMaking"}),", ",(0,s.jsx)(n.code,{children:"actualTaking"}),", and ",(0,s.jsx)(n.code,{children:"totalFee"})," values, along with the callback parameter in ",(0,s.jsx)(n.code,{children:"fill"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Callback Logic Executes"}),": The taker's contract can perform additional operations during the callback, such as arbitrage with Pendle's AMM or other limit orders. The goal is to use the ",(0,s.jsx)(n.code,{children:"actualMaking"})," amount to generate more value than the ",(0,s.jsx)(n.code,{children:"actualTaking"})," amount, creating a profit."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Send Tokens to Complete"}),": The taker's contract must send back the ",(0,s.jsx)(n.code,{children:"actualTaking"})," amount to ensure the fill operation completes successfully."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Limit Order Contract Sends Output"}),": Once the taker's contract sends the required tokens, the limit order contract transfers the agreed output to the limit order receivers."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Limit Order Callback Flow",src:r(296).A+"",title:"Limit Order Callback Flow",width:"1382",height:"986"})}),"\n",(0,s.jsxs)(n.p,{children:["This flow allows for flexible and creative use of the ",(0,s.jsx)(n.code,{children:"fill"})," function, providing opportunities for arbitrage and custom contract logic. Arbitrageurs can take advantage of this mechanism to execute strategies that generate profit by finding discrepancies in token values or other"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var i=r(6540);const s={},a=i.createContext(s);function t(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);