"use strict";(self.webpackChunkpendle_documentation=self.webpackChunkpendle_documentation||[]).push([[9943],{5063:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"Developers/FAQ","title":"Frequently Asked Questions","description":"For common errors and debugging guidance, see the Troubleshooting Guide.","source":"@site/docs/pendle-v2/Developers/FAQ.md","sourceDirName":"Developers","slug":"/Developers/FAQ","permalink":"/pendle-v2/Developers/FAQ","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"hide_table_of_contents":true},"sidebar":"myAutogeneratedSidebar","previous":{"title":"High Level Architecture","permalink":"/pendle-v2/Developers/HighLevelArchitecture"},"next":{"title":"\ud83d\udd27 Troubleshooting","permalink":"/pendle-v2/Developers/Troubleshooting"}}');var i=t(4848),a=t(8453);const s={hide_table_of_contents:!0},o="Frequently Asked Questions",d={},l=[{value:"Contract",id:"contract",level:2},{value:"How can I deploy a new SY Token on Pendle?",id:"how-can-i-deploy-a-new-sy-token-on-pendle",level:3},{value:"How can I generate all the params for the Router on-chain?",id:"how-can-i-generate-all-the-params-for-the-router-on-chain",level:3},{value:"Why do quoted rates differ from actual swap amounts?",id:"why-do-quoted-rates-differ-from-actual-swap-amounts",level:3},{value:"Is the <code>pendleSwap</code> contract address immutable?",id:"is-the-pendleswap-contract-address-immutable",level:3},{value:"Pricing &amp; Data",id:"pricing--data",level:2},{value:"How can I preview the received amount of add/remove liquidity?",id:"how-can-i-preview-the-received-amount-of-addremove-liquidity",level:3},{value:"How do I fetch the PT price?",id:"how-do-i-fetch-the-pt-price",level:3},{value:"How can I retrieve historical PT and YT prices?",id:"how-can-i-retrieve-historical-pt-and-yt-prices",level:3},{value:"How can I retrieve market data such as TVL and APR?",id:"how-can-i-retrieve-market-data-such-as-tvl-and-apr",level:3},{value:"How can I retrieve market spot prices?",id:"how-can-i-retrieve-market-spot-prices",level:3},{value:"How can I retrieve a list of market categories?",id:"how-can-i-retrieve-a-list-of-market-categories",level:3},{value:"How can I calculate the implied APY for a transaction?",id:"how-can-i-calculate-the-implied-apy-for-a-transaction",level:3},{value:"What is the format for <code>expectedCap</code> and <code>currentCap</code>?",id:"what-is-the-format-for-expectedcap-and-currentcap",level:3},{value:"How can I determine the number of SY tokens received from PT tokens?",id:"how-can-i-determine-the-number-of-sy-tokens-received-from-pt-tokens",level:3},{value:"Rewards &amp; Interest",id:"rewards--interest",level:2},{value:"Getting Up-to-Date <code>accruedRewards</code> On-Chain (Applicable to SY, YT, &amp; LP)",id:"getting-up-to-date-accruedrewards-on-chain-applicable-to-sy-yt--lp",level:3},{value:"Can the output of <code>getRewardTokens</code> change?",id:"can-the-output-of-getrewardtokens-change",level:3},{value:"How to read unclaimed Rewards and Interest for SY/YT/Market",id:"how-to-read-unclaimed-rewards-and-interest-for-syytmarket",level:3},{value:"When will PENDLE incentives for a new market begin?",id:"when-will-pendle-incentives-for-a-new-market-begin",level:3},{value:"Where are Merkle distribution proofs located?",id:"where-are-merkle-distribution-proofs-located",level:3},{value:"Does Pendle provide a script for tracking user points or balances?",id:"does-pendle-provide-a-script-for-tracking-user-points-or-balances",level:3},{value:"Token Behavior",id:"token-behavior",level:2},{value:"Why does the quantity of aTokens fluctuate?",id:"why-does-the-quantity-of-atokens-fluctuate",level:3},{value:"Limit Orders &amp; Routing",id:"limit-orders--routing",level:2},{value:"How do limit orders interact with market swaps?",id:"how-do-limit-orders-interact-with-market-swaps",level:3},{value:"Is there an API to swap PT between different pools?",id:"is-there-an-api-to-swap-pt-between-different-pools",level:3},{value:"How can I determine which assets support direct PT-to-PT swaps?",id:"how-can-i-determine-which-assets-support-direct-pt-to-pt-swaps",level:3},{value:"Glossary",id:"glossary",level:2},{value:"Partner Technical Insights",id:"partner-technical-insights",level:2},{value:"Upper Bound for LP-to-SY Rate",id:"upper-bound-for-lp-to-sy-rate",level:3},{value:"PT Pricing: Always Price to SY, Not Asset",id:"pt-pricing-always-price-to-sy-not-asset",level:3},{value:"Oracle Cardinality Mechanic",id:"oracle-cardinality-mechanic",level:3},{value:"PendleChainlinkOracle Decimals",id:"pendlechainlinkoracle-decimals",level:3},{value:"sPENDLE Monthly Revenue API",id:"spendle-monthly-revenue-api",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"frequently-asked-questions",children:"Frequently Asked Questions"})}),"\n",(0,i.jsx)(n.admonition,{title:"Looking for error solutions?",type:"tip",children:(0,i.jsxs)(n.p,{children:["For common errors and debugging guidance, see the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/pendle-v2/Developers/Troubleshooting",children:"Troubleshooting Guide"})}),"."]})}),"\n",(0,i.jsx)(n.admonition,{title:"Looking for API questions?",type:"tip",children:(0,i.jsxs)(n.p,{children:["For Hosted SDK, rate limiting, and Backend API questions, see the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/pendle-v2/Developers/Backend/ApiOverview#frequently-asked-questions",children:"API Overview FAQ"})}),"."]})}),"\n",(0,i.jsx)(n.h2,{id:"contract",children:"Contract"}),"\n",(0,i.jsx)(n.h3,{id:"how-can-i-deploy-a-new-sy-token-on-pendle",children:"How can I deploy a new SY Token on Pendle?"}),"\n",(0,i.jsxs)(n.p,{children:["Pendle's smart contracts are permissionless, meaning anyone can deploy a new Standardized Yield (SY) Token without requiring approval from the Pendle team. To implement an SY Token, you must follow the Pendle SY Token standard, ensuring compatibility with the ecosystem. Detailed guidance, including contract structure and best practices, can be found in the ",(0,i.jsx)(n.a,{href:"./Contracts/StandardizedYield",children:"StandardizedYield documentation"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["For community listing a new asset, see the ",(0,i.jsx)(n.a,{href:"./Integration/CommunityListing",children:"Community Listing guide"})," and the ",(0,i.jsx)(n.a,{href:"https://pendle.notion.site/How-to-write-a-SY-A-guide-207567a21d378069aecbf20176591d93",children:"SY writing guide"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"how-can-i-generate-all-the-params-for-the-router-on-chain",children:"How can I generate all the params for the Router on-chain?"}),"\n",(0,i.jsx)(n.p,{children:"Please refer to the following:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./Contracts/PendleRouter/ContractIntegrationGuide",children:"Contract Integration Guide"})," \u2014 step-by-step Solidity examples"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./Contracts/PendleRouter/ApiReference/Types",children:"Types and Utility Functions"})," \u2014 struct definitions and helper functions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/pendle-finance/pendle-core-v2-public/blob/main/contracts/interfaces/IPAllActionTypeV3.sol",children:"IPAllActionTypeV3.sol"})," \u2014 full interface"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/pendle-finance/pendle-examples-public",children:"Pendle Examples"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"why-do-quoted-rates-differ-from-actual-swap-amounts",children:"Why do quoted rates differ from actual swap amounts?"}),"\n",(0,i.jsxs)(n.p,{children:["The rate functions in Pendle's quoter contract (e.g., ",(0,i.jsx)(n.code,{children:"getPtToSyRate"}),", ",(0,i.jsx)(n.code,{children:"getYtToSyRate"}),") provide ",(0,i.jsx)(n.strong,{children:"spot prices"}),", which do not account for price impact. To obtain the most accurate swap amounts, call Pendle's router functions directly or use the ",(0,i.jsx)(n.a,{href:"/pendle-v2/Developers/Backend/HostedSdk",children:"Hosted SDK"}),"."]}),"\n",(0,i.jsxs)(n.h3,{id:"is-the-pendleswap-contract-address-immutable",children:["Is the ",(0,i.jsx)(n.code,{children:"pendleSwap"})," contract address immutable?"]}),"\n",(0,i.jsxs)(n.p,{children:["No, the contract address used for the ",(0,i.jsx)(n.code,{children:"pendleSwap"})," parameter (e.g., in ",(0,i.jsx)(n.code,{children:"swapExactTokenForPt"}),") is not guaranteed to be immutable and may change. Any changes will be announced publicly."]}),"\n",(0,i.jsx)(n.h2,{id:"pricing--data",children:"Pricing & Data"}),"\n",(0,i.jsx)(n.h3,{id:"how-can-i-preview-the-received-amount-of-addremove-liquidity",children:"How can I preview the received amount of add/remove liquidity?"}),"\n",(0,i.jsx)(n.p,{children:"To preview the amount you'll receive before submitting transactions, you can use:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Pendle API method (recommended): ",(0,i.jsx)(n.a,{href:"https://api-v2.pendle.finance/core/docs#/SDK/SdkController_addLiquidity",children:"Pendle Hosted SDK API"})]}),"\n",(0,i.jsxs)(n.li,{children:["On-chain method: ",(0,i.jsx)(n.a,{href:"https://github.com/pendle-finance/pendle-core-v2-public/blob/main/contracts/interfaces/IPActionAddRemoveLiqV3.sol",children:"PendleRouter Contract"}),". The detailed guide can be found in the ",(0,i.jsx)(n.a,{href:"./Contracts/PendleRouter/ContractIntegrationGuide",children:"Contract Integration Guide"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"how-do-i-fetch-the-pt-price",children:"How do I fetch the PT price?"}),"\n",(0,i.jsx)(n.p,{children:"You can get the PT (Principal Token) price via:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Pendle API method (recommended): ",(0,i.jsx)(n.a,{href:"https://api-v2.pendle.finance/core/docs#/Assets/AssetsSimplifiedController_getAllAssetPricesByAddresses",children:"Pendle price API"})]}),"\n",(0,i.jsxs)(n.li,{children:["On-chain method: ",(0,i.jsx)(n.code,{children:"getPtToAssetRate"})," of RouterStatic \u2014 see ",(0,i.jsx)(n.a,{href:"./Backend/RouterStatic",children:"RouterStatic"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"how-can-i-retrieve-historical-pt-and-yt-prices",children:"How can I retrieve historical PT and YT prices?"}),"\n",(0,i.jsx)(n.p,{children:"You can track historical PT/YT prices using:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Pendle API method: ",(0,i.jsx)(n.a,{href:"https://api-v2.pendle.finance/core/docs#/Prices/PricesController_ohlcv_v4",children:"Pendle ohlcv API"}),". Note that shorter timeframes (e.g., minute-by-minute updates) are not yet available."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"how-can-i-retrieve-market-data-such-as-tvl-and-apr",children:"How can I retrieve market data such as TVL and APR?"}),"\n",(0,i.jsxs)(n.p,{children:["You can obtain market data by calling the Pendle API. For example, to get data for a specific pool: ",(0,i.jsx)(n.code,{children:"https://api-v2.pendle.finance/core/v2/{chainId}/markets/{marketAddress}/data"}),". This returns relevant details for the specified market."]}),"\n",(0,i.jsx)(n.h3,{id:"how-can-i-retrieve-market-spot-prices",children:"How can I retrieve market spot prices?"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.a,{href:"https://api-v2.pendle.finance/core/docs#/SDK/SdkController_getMarketSpotSwappingPrice",children:(0,i.jsx)(n.code,{children:"getMarketSpotSwappingPrice"})})," endpoint. This is more suitable than calling the swap endpoint and offers a higher rate limit."]}),"\n",(0,i.jsx)(n.h3,{id:"how-can-i-retrieve-a-list-of-market-categories",children:"How can I retrieve a list of market categories?"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.a,{href:"https://api-v2.pendle.finance/core/docs#/Market%20Categories/MarketCategoriesController_findAllMarketCategories",children:(0,i.jsx)(n.code,{children:"findAllMarketCategories"})})," API endpoint."]}),"\n",(0,i.jsx)(n.h3,{id:"how-can-i-calculate-the-implied-apy-for-a-transaction",children:"How can I calculate the implied APY for a transaction?"}),"\n",(0,i.jsxs)(n.p,{children:["The implied APY can be calculated using the ",(0,i.jsx)(n.code,{children:"ptExchangeRate"}),". For a detailed explanation, refer to the ",(0,i.jsx)(n.a,{href:"../ProtocolMechanics/PendleMarketAPYCalculation",children:"APY Calculation documentation"}),"."]}),"\n",(0,i.jsxs)(n.h3,{id:"what-is-the-format-for-expectedcap-and-currentcap",children:["What is the format for ",(0,i.jsx)(n.code,{children:"expectedCap"})," and ",(0,i.jsx)(n.code,{children:"currentCap"}),"?"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"expectedCap"})," and ",(0,i.jsx)(n.code,{children:"currentCap"})," values are provided in base18 format (18 decimals)."]}),"\n",(0,i.jsx)(n.h3,{id:"how-can-i-determine-the-number-of-sy-tokens-received-from-pt-tokens",children:"How can I determine the number of SY tokens received from PT tokens?"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.a,{href:"/pendle-v2/Developers/Backend/HostedSdk",children:"Pendle Hosted SDK"})," to simulate the swap. This avoids the need to replicate the ",(0,i.jsx)(n.code,{children:"swapExactPtForSy"})," function off-chain."]}),"\n",(0,i.jsx)(n.h2,{id:"rewards--interest",children:"Rewards & Interest"}),"\n",(0,i.jsxs)(n.h3,{id:"getting-up-to-date-accruedrewards-on-chain-applicable-to-sy-yt--lp",children:["Getting Up-to-Date ",(0,i.jsx)(n.code,{children:"accruedRewards"})," On-Chain (Applicable to SY, YT, & LP)"]}),"\n",(0,i.jsx)(n.p,{children:"There are two methods:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Call ",(0,i.jsx)(n.code,{children:"redeemRewards(user)"})," and retrieve the output."]})," This method has the side effect of redeeming the user's rewards, so it might not be ideal."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Call ",(0,i.jsx)(n.code,{children:"IERC20(market).transfer(user,0)"})," followed by ",(0,i.jsx)(n.code,{children:"accruedRewards"}),"."]})," The transfer triggers an update of the user's rewards."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"can-the-output-of-getrewardtokens-change",children:["Can the output of ",(0,i.jsx)(n.code,{children:"getRewardTokens"})," change?"]}),"\n",(0,i.jsx)(n.p,{children:"Yes, the output can change if the underlying protocol adds new reward tokens. However, no reward tokens will ever be removed."}),"\n",(0,i.jsx)(n.h3,{id:"how-to-read-unclaimed-rewards-and-interest-for-syytmarket",children:"How to read unclaimed Rewards and Interest for SY/YT/Market"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"On-Chain Method:"})}),"\n",(0,i.jsxs)(n.p,{children:["To read for SY, please execute an ",(0,i.jsx)(n.code,{children:"eth_call"})," (",(0,i.jsx)(n.code,{children:"callStatic"})," in ethersjs) to the following function of SY:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"function claimRewards(address user) external returns (uint256[] memory rewardAmounts);\n"})}),"\n",(0,i.jsx)(n.p,{children:"For YT, execute the following function:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"function redeemDueInterestAndRewards(\n    address user,\n    bool redeemInterest,\n    bool redeemRewards\n) external returns (uint256 interestOut, uint256[] memory rewardsOut);\n"})}),"\n",(0,i.jsx)(n.p,{children:"For Market, execute the following function:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"function redeemRewards(address user) external returns (uint256[] memory);\n"})}),"\n",(0,i.jsx)(n.p,{children:"These calls can be batched through Multicall if necessary."}),"\n",(0,i.jsx)(n.h3,{id:"when-will-pendle-incentives-for-a-new-market-begin",children:"When will PENDLE incentives for a new market begin?"}),"\n",(0,i.jsx)(n.p,{children:"PENDLE incentives for a new market will begin on Thursday at 00:00 UTC (12 AM UTC), after the market has been whitelisted and added to voting."}),"\n",(0,i.jsx)(n.h3,{id:"where-are-merkle-distribution-proofs-located",children:"Where are Merkle distribution proofs located?"}),"\n",(0,i.jsxs)(n.p,{children:["Merkle roots and proofs for claiming rewards are maintained in the ",(0,i.jsx)(n.a,{href:"https://github.com/pendle-finance/merkle-distributions",children:(0,i.jsx)(n.code,{children:"pendle-finance/merkle-distributions"})})," repository."]}),"\n",(0,i.jsx)(n.h3,{id:"does-pendle-provide-a-script-for-tracking-user-points-or-balances",children:"Does Pendle provide a script for tracking user points or balances?"}),"\n",(0,i.jsxs)(n.p,{children:["Yes. The ",(0,i.jsx)(n.a,{href:"https://github.com/Pendle-Finance-Periphery/pendle-generic-balance-fetcher/tree/main",children:(0,i.jsx)(n.code,{children:"pendle-generic-balance-fetcher"})})," script tracks points and balances. It supports deposits from external protocols including Morpho, Euler, and Silo."]}),"\n",(0,i.jsx)(n.h2,{id:"token-behavior",children:"Token Behavior"}),"\n",(0,i.jsx)(n.h3,{id:"why-does-the-quantity-of-atokens-fluctuate",children:"Why does the quantity of aTokens fluctuate?"}),"\n",(0,i.jsx)(n.p,{children:"aTokens are rebasing tokens from Aave, meaning their quantity accrues rewards in real-time. This property causes the token balance to fluctuate, even during a transfer. Consequently, if you attempt to transfer a specific amount, the actual amount received might be slightly different (e.g., A-1 instead of A), which can lead to transaction failures if not accounted for."}),"\n",(0,i.jsx)(n.p,{children:"To prevent failures, check the aToken balance immediately before each transfer or operation that relies on a precise quantity."}),"\n",(0,i.jsx)(n.h2,{id:"limit-orders--routing",children:"Limit Orders & Routing"}),"\n",(0,i.jsx)(n.h3,{id:"how-do-limit-orders-interact-with-market-swaps",children:"How do limit orders interact with market swaps?"}),"\n",(0,i.jsx)(n.p,{children:"When a user performs a swap, the router automatically determines the optimal swap route for the best token output. This route can involve limit orders, the AMM LP, or a combination of both. Transaction emulation allows users to see the exact split between limit orders and AMM routing for any given swap in the current market environment."}),"\n",(0,i.jsx)(n.h3,{id:"is-there-an-api-to-swap-pt-between-different-pools",children:"Is there an API to swap PT between different pools?"}),"\n",(0,i.jsxs)(n.p,{children:["Yes, use the ",(0,i.jsx)(n.strong,{children:"Roll Over PT"})," API to swap PTs from one market to another. See the ",(0,i.jsx)(n.a,{href:"/pendle-v2/Developers/Backend/HostedSdk",children:"Hosted SDK Documentation"})," for details."]}),"\n",(0,i.jsx)(n.h3,{id:"how-can-i-determine-which-assets-support-direct-pt-to-pt-swaps",children:"How can I determine which assets support direct PT-to-PT swaps?"}),"\n",(0,i.jsx)(n.p,{children:"Not all PT pairs are swappable. There is no static list of available pairs \u2014 call the API to check whether a specific swap is supported."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h1,{id:"supplemental-knowledge-base",children:"Supplemental Knowledge Base"}),"\n",(0,i.jsx)(n.admonition,{title:"AI-optimized reference",type:"info",children:(0,i.jsx)(n.p,{children:"This section contains supplemental Q&A and technical insights gathered from real partner integrations. It is intended to be searched and read by AI tools to provide more accurate answers about the Pendle protocol. The content below supplements the main documentation and covers edge cases, best practices, and technical nuances."})}),"\n",(0,i.jsx)(n.h2,{id:"glossary",children:"Glossary"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Term"}),(0,i.jsx)(n.th,{children:"Definition"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Pool"})}),(0,i.jsx)(n.td,{children:'Interchangeable with "market"'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Maturity"})}),(0,i.jsx)(n.td,{children:"The end date of a financial product (pool). Upon maturity, users can claim rewards and either redeem or roll over to a new pool"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"IY"})}),(0,i.jsx)(n.td,{children:"Implied Yield"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Roll over PT"})}),(0,i.jsx)(n.td,{children:"Swap PTs between markets (e.g., from an expiring pool to a new one)"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"partner-technical-insights",children:"Partner Technical Insights"}),"\n",(0,i.jsx)(n.p,{children:"These insights come from real conversations with technical partners during integration. They cover edge cases, best practices, and technical nuances not always obvious from standard documentation."}),"\n",(0,i.jsx)(n.h3,{id:"upper-bound-for-lp-to-sy-rate",children:"Upper Bound for LP-to-SY Rate"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Q: Is there a value that can be used as an upper bound for LP-to-SY?"})}),"\n",(0,i.jsxs)(n.p,{children:["LP in theory can have a value as high as infinity if the fee generated is infinity. However, an upper bound of approximately ",(0,i.jsx)(n.strong,{children:"3 units"})," is somewhat reasonable for data validation purposes. (This is not security advice.)"]}),"\n",(0,i.jsx)(n.h3,{id:"pt-pricing-always-price-to-sy-not-asset",children:"PT Pricing: Always Price to SY, Not Asset"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Q: Should PT be priced against the asset (e.g., WBTC) or the wrapped token (e.g., eBTC)?"})}),"\n",(0,i.jsx)(n.p,{children:"Pendle recommends pricing PT to SY and pricing the token that SY wraps whenever possible, because these tokens frequently trade at a discount compared to their true value. So PT-eBTC should be priced to eBTC, and PT-ezETH should be priced to ezETH."}),"\n",(0,i.jsx)(n.p,{children:"It's quite straightforward:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If you use ",(0,i.jsx)(n.code,{children:"getPtToAsset"}),", multiply it by the asset price"]}),"\n",(0,i.jsxs)(n.li,{children:["If you use ",(0,i.jsx)(n.code,{children:"getPtToSy"}),", multiply it by the SY price"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"For example, PT-ezETH can be priced by either:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Method 1: ",(0,i.jsx)(n.code,{children:"1 PT-ezETH = 1.2 ETH = 1.2 * $3500 = $4200 USD"})]}),"\n",(0,i.jsxs)(n.li,{children:["Method 2: ",(0,i.jsx)(n.code,{children:"1 PT-ezETH = 1.01 ezETH = 1.01 * $4158 = $4199.58 USD"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Pricing in the wrapped token (eBTC, ezETH) is always strictly more accurate since PT-eBTC is only tradable to eBTC in Pendle. The eBTC to WBTC conversion is external to Pendle."}),"\n",(0,i.jsx)(n.h3,{id:"oracle-cardinality-mechanic",children:"Oracle Cardinality Mechanic"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Q: What is the purpose of the cardinality mechanic in the market TWAP oracle?"})}),"\n",(0,i.jsxs)(n.p,{children:["It works the same as Uniswap V3. The cardinality mechanic is an initialization gas savings measure. Calling ",(0,i.jsx)(n.code,{children:"increaseObservationsCardinalityNext"})," has no downside \u2014 anyone can call it. If called to the max, it costs ",(0,i.jsx)(n.code,{children:"65536 * 20000 gas"}),", which is significant. The practical approach is to increase cardinality to your required level (e.g., 1800 for most use cases)."]}),"\n",(0,i.jsx)(n.h3,{id:"pendlechainlinkoracle-decimals",children:"PendleChainlinkOracle Decimals"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Q: Why does the PendleChainlinkOracle return a price with more than 18 decimals?"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"answer"})," from ",(0,i.jsx)(n.code,{children:"PendleChainlinkOracle"})," satisfies:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"1 natural unit of PendleToken = (answer / 1e18) natural unit of OutputToken\n"})}),"\n",(0,i.jsx)(n.p,{children:"In other words:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"10**(PendleToken.decimals) = (answer / 1e18) * 10**(OutputToken.decimals)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This means the ",(0,i.jsx)(n.code,{children:"answer"})," has ",(0,i.jsx)(n.code,{children:"18 + OutputToken.decimals"})," total decimals. For example, if ",(0,i.jsx)(n.code,{children:"OutputToken.decimals = 12"}),", the answer will have 30 decimals. This is expected behavior."]}),"\n",(0,i.jsx)(n.h3,{id:"spendle-monthly-revenue-api",children:"sPENDLE Monthly Revenue API"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Q: How can I retrieve sPENDLE monthly revenue data?"})}),"\n",(0,i.jsxs)(n.p,{children:["Use the API endpoint: ",(0,i.jsx)(n.a,{href:"https://api-v2.pendle.finance/core/docs#/Ve%20Pendle/VePendleController_getMonthlyRevenue",children:(0,i.jsx)(n.code,{children:"getMonthlyRevenue"})}),". The response contains:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"revenues"}),": Array of monthly revenues in USD"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"timestamps"}),": Corresponding month timestamps (first epoch's start timestamp, in seconds)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"accumulatedRevenue"}),": Sum of all revenues"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var r=t(6540);const i={},a=r.createContext(i);function s(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);