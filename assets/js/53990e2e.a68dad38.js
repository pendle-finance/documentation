"use strict";(self.webpackChunkpendle_documentation=self.webpackChunkpendle_documentation||[]).push([[9943],{5063:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"Developers/FAQ","title":"Frequently Asked Questions","description":"This document is being iterated on rapidly due to incoming questions from partner protocols.","source":"@site/docs/pendle-v2/Developers/FAQ.md","sourceDirName":"Developers","slug":"/Developers/FAQ","permalink":"/pendle-v2/Developers/FAQ","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"hide_table_of_contents":true},"sidebar":"myAutogeneratedSidebar","previous":{"title":"High Level Architecture","permalink":"/pendle-v2/Developers/HighLevelArchitecture"},"next":{"title":"StandardizedYield (SY)","permalink":"/pendle-v2/Developers/Contracts/StandardizedYield"}}');var s=t(4848),o=t(8453);const i={hide_table_of_contents:!0},a="Frequently Asked Questions",d={},l=[{value:"Contract",id:"contract",level:2},{value:"Why No <code>swapExactSyForPt</code>?",id:"why-no-swapexactsyforpt",level:3},{value:"How can I deploy a new SY Token on Pendle?",id:"how-can-i-deploy-a-new-sy-token-on-pendle",level:3},{value:"Backend",id:"backend",level:2},{value:"How can I preview the received amount of add/remove liquidity?",id:"how-can-i-preview-the-received-amount-of-addremove-liquidity",level:3},{value:"How do I fetch the PT price?",id:"how-do-i-fetch-the-pt-price",level:3},{value:"How can I retrieve historical PT and YT prices?",id:"how-can-i-retrieve-historical-pt-and-yt-prices",level:3},{value:"Others",id:"others",level:2},{value:"Getting Up-to-Date <code>accruedRewards</code> On-Chain (Applicable to SY, YT, &amp; LP)",id:"getting-up-to-date-accruedrewards-on-chain-applicable-to-sy-yt--lp",level:3},{value:"Can the output of <code>getRewardTokens</code> change?",id:"can-the-output-of-getrewardtokens-change",level:3},{value:"How to read unclaimed Rewards and Interest for SY/YT/Market",id:"how-to-read-unclaimed-rewards-and-interest-for-syytmarket",level:3},{value:"How can I generate all the params for the Router on-chain",id:"how-can-i-generate-all-the-params-for-the-router-on-chain",level:3},{value:"Why shouldn&#39;t I use getPtToAssetRate",id:"why-shouldnt-i-use-getpttoassetrate",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"frequently-asked-questions",children:"Frequently Asked Questions"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"This document is being iterated on rapidly due to incoming questions from partner protocols."})}),"\n",(0,s.jsx)(n.h2,{id:"contract",children:"Contract"}),"\n",(0,s.jsxs)(n.h3,{id:"why-no-swapexactsyforpt",children:["Why No ",(0,s.jsx)(n.code,{children:"swapExactSyForPt"}),"?"]}),"\n",(0,s.jsxs)(n.p,{children:["Unlike standard AMMs, Pendle's AMM only allows swapping exact PT in/out. Therefore, functions like ",(0,s.jsx)(n.code,{children:"swapExactSyForPt"})," and ",(0,s.jsx)(n.code,{children:"swapPtForExactSy"})," should generally be avoided. If necessary, use PendleRouter's ",(0,s.jsx)(n.code,{children:"swapExactSyForPt"})," with ",(0,s.jsx)(n.code,{children:"approx"})," parameters. Refer to the PendleRouter documentation for details."]}),"\n",(0,s.jsx)(n.h3,{id:"how-can-i-deploy-a-new-sy-token-on-pendle",children:"How can I deploy a new SY Token on Pendle?"}),"\n",(0,s.jsxs)(n.p,{children:["Pendle's smart contracts are permissionless, meaning anyone can deploy a new Standardized Yield (SY) Token without requiring approval from the Pendle team. To implement an SY Token, you must follow the Pendle SY Token standard, ensuring compatibility with the ecosystem. Detailed guidance, including contract structure and best practices, can be found in the ",(0,s.jsx)(n.a,{href:"https://docs.pendle.finance/Developers/Contracts/StandardizedYield",children:"Pendle Developer Documentation"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"backend",children:"Backend"}),"\n",(0,s.jsx)(n.h3,{id:"how-can-i-preview-the-received-amount-of-addremove-liquidity",children:"How can I preview the received amount of add/remove liquidity?"}),"\n",(0,s.jsx)(n.p,{children:"To preview the amount you'll receive before submitting transactions, you can use:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Pendle API method (recommended): ",(0,s.jsx)(n.a,{href:"https://api-v2.pendle.finance/core/docs#/SDK/SdkController_addLiquidity",children:"Pendle Hosted SDK API"})]}),"\n",(0,s.jsxs)(n.li,{children:["On-chain method: ",(0,s.jsx)(n.a,{href:"https://github.com/pendle-finance/pendle-core-v2-public/blob/main/contracts/interfaces/IPActionAddRemoveLiqV3.sol",children:"PendleRouter Contract"}),". The detailed guide can be found here ",(0,s.jsx)(n.a,{href:"https://docs.pendle.finance/Developers/Contracts/PendleRouter",children:"https://docs.pendle.finance/Developers/Contracts/PendleRouter"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"how-do-i-fetch-the-pt-price",children:"How do I fetch the PT price?"}),"\n",(0,s.jsx)(n.p,{children:"You can get the PT (Principal Token) price via:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Pendle API method (recommended): ",(0,s.jsx)(n.a,{href:"https://api-v2.pendle.finance/core/docs#/Assets/AssetsSimplifiedController_getAllAssetPricesByAddresses",children:"Pendle price API"})]}),"\n",(0,s.jsxs)(n.li,{children:["On-chain method: ",(0,s.jsx)(n.code,{children:"getPtToAssetRate"})," of RouterStatic ",(0,s.jsx)(n.a,{href:"https://docs.pendle.finance/Developers/Backend/RouterStatic",children:"https://docs.pendle.finance/Developers/Backend/RouterStatic"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"how-can-i-retrieve-historical-pt-and-yt-prices",children:"How can I retrieve historical PT and YT prices?"}),"\n",(0,s.jsx)(n.p,{children:"You can track historical PT/YT prices using:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Pendle API method: ",(0,s.jsx)(n.a,{href:"https://api-v2.pendle.finance/core/docs#/Prices/PricesController_ohlcv_v4",children:"Pendle ohlcv API"}),". Note that shorter timeframes (e.g., minute-by-minute updates) are not yet available."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"others",children:"Others"}),"\n",(0,s.jsxs)(n.h3,{id:"getting-up-to-date-accruedrewards-on-chain-applicable-to-sy-yt--lp",children:["Getting Up-to-Date ",(0,s.jsx)(n.code,{children:"accruedRewards"})," On-Chain (Applicable to SY, YT, & LP)"]}),"\n",(0,s.jsx)(n.p,{children:"There are two methods:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Call ",(0,s.jsx)(n.code,{children:"redeemRewards(user)"})," and retrieve the output."]})," This method has the side effect of redeeming the user's rewards, so it might not be ideal."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Call ",(0,s.jsx)(n.code,{children:"IERC20(market).transfer(user,0)"})," followed by ",(0,s.jsx)(n.code,{children:"accruedRewards"}),"."]})," The transfer triggers an update of the user's rewards."]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"can-the-output-of-getrewardtokens-change",children:["Can the output of ",(0,s.jsx)(n.code,{children:"getRewardTokens"})," change?"]}),"\n",(0,s.jsx)(n.p,{children:"Yes, the output can change if the underlying protocol adds new reward tokens. However, no reward tokens will ever be removed."}),"\n",(0,s.jsx)(n.h3,{id:"how-to-read-unclaimed-rewards-and-interest-for-syytmarket",children:"How to read unclaimed Rewards and Interest for SY/YT/Market"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"On-Chain Method:"})}),"\n",(0,s.jsxs)(n.p,{children:["To read for SY, please execute an ",(0,s.jsx)(n.code,{children:"eth_call"})," (",(0,s.jsx)(n.code,{children:"callStatic"})," in ethersjs) to the following function of SY:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-solidity",children:"function claimRewards(address user) external returns (uint256[] memory rewardAmounts);\n"})}),"\n",(0,s.jsx)(n.p,{children:"For YT, execute the following function:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-solidity",children:"function redeemDueInterestAndRewards(\n    address user,\n    bool redeemInterest,\n    bool redeemRewards\n) external returns (uint256 interestOut, uint256[] memory rewardsOut);\n"})}),"\n",(0,s.jsx)(n.p,{children:"For Market, execute the following function:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-solidity",children:"function redeemRewards(address user) external returns (uint256[] memory);\n"})}),"\n",(0,s.jsx)(n.p,{children:"These calls can be batched through Multicall if necessary."}),"\n",(0,s.jsx)(n.h3,{id:"how-can-i-generate-all-the-params-for-the-router-on-chain",children:"How can I generate all the params for the Router on-chain"}),"\n",(0,s.jsx)(n.p,{children:"Please refer to the following 3 links:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.pendle.finance/Developers/Contracts/PendleRouter#generating-required-parameters-on-chain",children:"PendleRouter"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/pendle-finance/pendle-core-v2-public/blob/main/contracts/interfaces/IPAllActionTypeV3.sol",children:"IPAllActionTypeV3.sol"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/pendle-finance/pendle-examples-public",children:"Pendle Examples"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"why-shouldnt-i-use-getpttoassetrate",children:"Why shouldn't I use getPtToAssetRate"}),"\n",(0,s.jsx)(n.p,{children:"Please read the following:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Question:"}),"\nI am trying to better understand why Pendle recommends the pricing of PT to SY instead of Assets. From my understanding, pricing of the PT to the SY does not expose the PT price feed the YT to Asset risk. How is the exchange rate from SY to Asset calculated and would that possibly impact the price feed if there was a scenario where there was not withdraw liquidity from SY to Asset?"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Answer:"}),"\nActually, that might be misunderstood. Pendle recommends pricing PT to SY. For SY to any other units, the integrator can choose an appropriate method based on whether the asset can be directly redeemed from the SY or if there is a slashing risk, etc."]}),"\n",(0,s.jsx)(n.p,{children:"Pendle can\u2019t provide a perfect PT to Asset price because Asset price is not well defined. Take a simple example:\nPT-sUSDe / SY-sUSDe with asset being USDe\nPendle can guarantee 1 PT-sUSDe can be traded to X SY-sUSDe == X sUSDe . So PT to SY price exists natively\nPendle can\u2019t guarantee sUSDe is redeemable to some amount of USDe"}),"\n",(0,s.jsx)(n.p,{children:"Which now traced back to: SY-sUSDe\u2019s asset is not USDe, but USDe staked in Ethena, and the price of this is not well defined"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Question:"}),"\nThanks! That makes sense utilizing the SY and letting integrators choose the approriate method. What would happen in essence if there was a depeg in USDe from PT to Asset, would there possibly be any impact on the PT to Asset oracle feed relative to a PT to SY?"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Answer:"}),"\nfor sUSDe depeg from USDe, PT price is not impacted even when PT-Asset is used because Pendle base the SY-Asset conversion rate on the underlying contract, not the market rate (this rate is SY.exchangeRate() and it will always read a rate provided by the underlying contract)"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var r=t(6540);const s={},o=r.createContext(s);function i(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);