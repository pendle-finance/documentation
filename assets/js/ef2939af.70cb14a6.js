"use strict";(self.webpackChunkpendle_documentation=self.webpackChunkpendle_documentation||[]).push([[9971],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=d(n),c=i,h=u["".concat(s,".").concat(c)]||u[c]||m[c]||r;return n?a.createElement(h,o(o({ref:t},p),{},{components:n})):a.createElement(h,o({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:i,o[1]=l;for(var d=2;d<r;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},9395:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var a=n(7462),i=(n(7294),n(3905));const r={hide_table_of_contents:!0},o="Backend and Hosted SDK",l={unversionedId:"Developers/Backend/BackendAndHostedSDK",id:"Developers/Backend/BackendAndHostedSDK",title:"Backend and Hosted SDK",description:"Pendle Backend offers developers accurate and up-to-date data, empowering them to build and innovate with the latest protocol information.",source:"@site/docs/Developers/Backend/BackendAndHostedSDK.md",sourceDirName:"Developers/Backend",slug:"/Developers/Backend/BackendAndHostedSDK",permalink:"/Developers/Backend/BackendAndHostedSDK",draft:!1,tags:[],version:"current",frontMatter:{hide_table_of_contents:!0},sidebar:"myAutogeneratedSidebar",previous:{title:"Sanity checks for PT Integrations",permalink:"/Developers/Oracles/PTSanityChecks"},next:{title:"RouterStatic",permalink:"/Developers/Backend/RouterStatic"}},s={},d=[{value:"Pendle Restful API",id:"pendle-restful-api",level:2},{value:"Pendle Hosted SDK",id:"pendle-hosted-sdk",level:2},{value:"Supported functions",id:"supported-functions",level:3},{value:"Features",id:"features",level:3},{value:"Routing",id:"routing",level:4},{value:"Additional data",id:"additional-data",level:4},{value:"Migrations",id:"migrations",level:4},{value:"Rate limiting",id:"rate-limiting",level:2},{value:"Rate limiting method",id:"rate-limiting-method",level:3},{value:"Cost calculation",id:"cost-calculation",level:3},{value:"Rate limit headers",id:"rate-limit-headers",level:3}],p={toc:d},u="wrapper";function m(e){let{components:t,...r}=e;return(0,i.kt)(u,(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"backend-and-hosted-sdk"},"Backend and Hosted SDK"),(0,i.kt)("p",null,"Pendle Backend offers developers accurate and up-to-date data, empowering them to build and innovate with the latest protocol information."),(0,i.kt)("p",null,"Pendle backend is hosted at ",(0,i.kt)("a",{parentName:"p",href:"https://api-v2.pendle.finance/core/docs"},"https://api-v2.pendle.finance/core/docs")),(0,i.kt)("p",null,"Our Pendle Backend include two core features: Pendle Restful API and Pendle Hosted SDK."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Pendle Restful API"),": Provides developers with accurate and up-to-date data, empowering them to build and innovate with the latest protocol information."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Pendle Hosted SDK"),": Offers a more optimized and efficient way to interact with the Pendle Router to buy and sell PTs/YTs, add/remove liquidity, and more.")),(0,i.kt)("h2",{id:"pendle-restful-api"},"Pendle Restful API"),(0,i.kt)("p",null,"We support:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Get Pendle asset's information"),(0,i.kt)("li",{parentName:"ul"},"Get Pendle market's information"),(0,i.kt)("li",{parentName:"ul"},"Get vePendle's information"),(0,i.kt)("li",{parentName:"ul"},"Get spot prices, historical prices of Pendle assets"),(0,i.kt)("li",{parentName:"ul"},"Get historical data of Pendle markets")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("p",null,"To get list of whitelisted and not-expired markets, you can use ",(0,i.kt)("a",{parentName:"p",href:"https://api-v2.pendle.finance/core/v1/1/markets?order_by=name%3A1&skip=0&limit=10&is_expired=false&select=pro"},"the following endpoint.")),(0,i.kt)("p",null,"Please visit to our ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/pendle-finance/pendle-examples-public/blob/main/backend-api-demo/src/index.ts"},"github public example repository")," to see more examples of how to use our backend API."),(0,i.kt)("h2",{id:"pendle-hosted-sdk"},"Pendle Hosted SDK"),(0,i.kt)("p",null,"Pendle accommodates a vast array of assets, each characterized by its unique nuances and complexities. While the Pendle protocol remains immutable, the underlying assets don't share this feature, requiring our app and SDK to be updated frequently to align with changes in these assets."),(0,i.kt)("p",null,"To address this, Pendle has introduced a hosted version of our SDK. It ensures the output remains consistent with Pendle's UI and keeps up-to-date with the latest protocol changes. The API design prioritizes simplicity and stability, with a high rate limit to meet the needs of most users."),(0,i.kt)("h3",{id:"supported-functions"},"Supported functions"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Swap"),(0,i.kt)("li",{parentName:"ul"},"Add liquidity"),(0,i.kt)("li",{parentName:"ul"},"Remove liquidity"),(0,i.kt)("li",{parentName:"ul"},"Mint PT & YT"),(0,i.kt)("li",{parentName:"ul"},"Redeem PT & YT"),(0,i.kt)("li",{parentName:"ul"},"Transfer liquidity"),(0,i.kt)("li",{parentName:"ul"},"Roll over PT"),(0,i.kt)("li",{parentName:"ul"},"Add liquidity dual"),(0,i.kt)("li",{parentName:"ul"},"Remove liquidity dual")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("p",null,"To swap ",(0,i.kt)("strong",{parentName:"p"},"1 USDC")," to ",(0,i.kt)("strong",{parentName:"p"},"PT eETH")," in ",(0,i.kt)("strong",{parentName:"p"},"eETH (0x7d372819240d14fb477f17b964f95f33beb4c704)")," with 1% slippage:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"GET https://api-v2.pendle.finance/core/v1/sdk/1/markets/0x7d372819240d14fb477f17b964f95f33beb4c704/swap?receiver=<RECEIVER_ADDRESS>&slippage=0.01&enableAggregator=true&tokenIn=0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48&tokenOut=0x6ee2b5e19ecba773a352e5b21415dc419a700d1d&amountIn=1000000\n")),(0,i.kt)("p",null,"Please visit to our ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/pendle-finance/pendle-examples-public/tree/main/hosted-sdk-demo/src"},"github")," to see more example"),(0,i.kt)("h3",{id:"features"},"Features"),(0,i.kt)("h4",{id:"routing"},"Routing"),(0,i.kt)("p",null,"Routing is a feature of the Pendle SDK that helps users find the most optimal route to interact with the Pendle system. This feature ensures that users can efficiently execute their transactions by identifying the best paths for their specific needs, whether it's swapping assets, adding or removing liquidity, or any other supported function."),(0,i.kt)("p",null,"To take advantage of the routing feature, users need to set the ",(0,i.kt)("inlineCode",{parentName:"p"},"enableAggregator")," option to ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),". When this option is enabled, the system will automatically perform routing to find the most optimal route for the user's transaction. This ensures that users always get the best possible outcome when interacting with the Pendle system."),(0,i.kt)("h4",{id:"additional-data"},"Additional data"),(0,i.kt)("p",null,"When an endpoint has an ",(0,i.kt)("inlineCode",{parentName:"p"},"additionalData")," field, users can pass in some fields to receive more data, but it will cost more computing units."),(0,i.kt)("p",null,"For example, our ",(0,i.kt)("strong",{parentName:"p"},"swap")," endpoint has ",(0,i.kt)("inlineCode",{parentName:"p"},"additionalData")," with two available fields: ",(0,i.kt)("inlineCode",{parentName:"p"},"impliedApy")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"effectiveApy"),". If the query parameters have ",(0,i.kt)("inlineCode",{parentName:"p"},"additionalData=impliedApy"),", the response will have the implied APY before and after the swap action."),(0,i.kt)("p",null,"For additional usage, please refer to our external swagger to explore more."),(0,i.kt)("h4",{id:"migrations"},"Migrations"),(0,i.kt)("p",null,"If you are using the old Hosted SDK, please take a look at ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/pendle-finance/pendle-examples-public/tree/main/hosted-sdk-demo/src/migrations"},"our example")," to migrate to the new system."),(0,i.kt)("h2",{id:"rate-limiting"},"Rate limiting"),(0,i.kt)("p",null,"To ensure the stability of our services and fair usage for all users, all of our endpoints are rate-limited."),(0,i.kt)("p",null,"Pendle API utilizes a calculated query cost method to determine rate limits. Each endpoint has a specific query cost, and the overall rate limit is calculated based on the total query cost of the endpoints accessed."),(0,i.kt)("h3",{id:"rate-limiting-method"},"Rate limiting method"),(0,i.kt)("p",null,"Every user is allocated a certain number of points that they can spend per minute, referred to as the rate limit. The query cost of each endpoint varies, and the rate limit is derived from these costs. Currently, the rate limit for each user is set at 100 points per minute."),(0,i.kt)("p",null,"For example, if a user has 100 points per minute, and the query cost of an endpoint is 1, it is the same as saying that the user can make 100 queries per minute. If the query cost of an endpoint is 2, then the user can only make 50 queries per minute."),(0,i.kt)("h3",{id:"cost-calculation"},"Cost calculation"),(0,i.kt)("p",null,"Most endpoints have a fixed query cost, which is displayed in the swagger documentation under the CU (Computing Unit) box before the endpoint description."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Computing cost",src:n(1711).Z,title:"Computing cost",width:"2884",height:"1654"})),(0,i.kt)("p",null,"Some endpoints have a dynamic query cost, which depends on the number of additional data fields requested. For instance, the swap endpoint has a base query cost of 5, but if the aggregator is run, the query cost increases to 10. The more additional data fields requested, the higher the query cost."),(0,i.kt)("h3",{id:"rate-limit-headers"},"Rate limit headers"),(0,i.kt)("p",null,"In the response headers, we provide the following information to help you manage your rate limit, as shown below:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Header"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"X-RateLimit-Limit")),(0,i.kt)("td",{parentName:"tr",align:null},"The maximum number of points that the user is permitted to make in a minute.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"X-RateLimit-Remaining")),(0,i.kt)("td",{parentName:"tr",align:null},"The number of points remaining in the current rate limit window.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"X-RateLimit-Reset")),(0,i.kt)("td",{parentName:"tr",align:null},"The time at which the current rate limit window resets in UTC epoch seconds.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"X-Computing-Unit")),(0,i.kt)("td",{parentName:"tr",align:null},"The query cost of the endpoint.")))),(0,i.kt)("p",null,"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"x-ratelimit-limit: 100\nx-ratelimit-remaining: 99\nx-ratelimit-reset: 1724206817\n")),(0,i.kt)("p",null,"Those headers mean that the user has 100 points per minute, and they have 99 points remaining. The point will reset at 1724206817 (August 21, 2024 2:20:17 UTC)"))}m.isMDXComponent=!0},1711:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/swagger_external-013d5bf8e56a07b04ce77ee947199450.png"}}]);