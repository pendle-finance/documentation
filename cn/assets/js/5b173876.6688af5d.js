"use strict";(self.webpackChunkpendle_documentation=self.webpackChunkpendle_documentation||[]).push([[4752],{4689:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"Backend/best-practices","title":"Boros API Best Practices","description":"This guide provides recommendations and common patterns for integrating with the Boros API efficiently.","source":"@site/docs/boros-dev-docs/Backend/5. best-practices.mdx","sourceDirName":"Backend","slug":"/Backend/best-practices","permalink":"/cn/boros-dev/Backend/best-practices","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"borosSidebar","previous":{"title":"\ud83d\udce1 WebSocket","permalink":"/cn/boros-dev/Backend/websocket"},"next":{"title":"\u2753 FAQ","permalink":"/cn/boros-dev/FAQ"}}');var t=s(4848),i=s(8453);const a={},l="Boros API Best Practices",c={},o=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Bulk Order Placement",id:"bulk-order-placement",level:2},{value:"Why Use Bulk Orders?",id:"why-use-bulk-orders",level:3},{value:"Benefits",id:"benefits",level:3},{value:"Examples",id:"examples",level:3},{value:"Market Management",id:"market-management",level:2},{value:"Exit Unused Markets",id:"exit-unused-markets",level:3},{value:"When to Exit Markets",id:"when-to-exit-markets",level:3},{value:"Isolated-Only Markets",id:"isolated-only-markets",level:3},{value:"API Reference",id:"api-reference",level:3},{value:"Gas Usage and Estimation",id:"gas-usage-and-estimation",level:2},{value:"Monitor Gas Balance",id:"monitor-gas-balance",level:3},{value:"Arbitrum Gas Spikes",id:"arbitrum-gas-spikes",level:3},{value:"API Reference",id:"api-reference-1",level:3},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"boros-api-best-practices",children:"Boros API Best Practices"})}),"\n",(0,t.jsx)(n.p,{children:"This guide provides recommendations and common patterns for integrating with the Boros API efficiently."}),"\n",(0,t.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#bulk-order-placement",children:"Bulk Order Placement"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#market-management",children:"Market Management"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#gas-usage-and-estimation",children:"Gas Usage and Estimation"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"bulk-order-placement",children:"Bulk Order Placement"}),"\n",(0,t.jsxs)(n.p,{children:["When placing multiple orders simultaneously, ",(0,t.jsx)(n.strong,{children:"always use the bulk order endpoint"})," instead of making multiple single order requests."]}),"\n",(0,t.jsx)(n.h3,{id:"why-use-bulk-orders",children:"Why Use Bulk Orders?"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Approach"}),(0,t.jsx)(n.th,{children:"Gas Cost"}),(0,t.jsx)(n.th,{children:"Atomicity"}),(0,t.jsx)(n.th,{children:"Network Overhead"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Multiple single orders"}),(0,t.jsx)(n.td,{children:"High (N transactions)"}),(0,t.jsx)(n.td,{children:"None (partial failures possible)"}),(0,t.jsx)(n.td,{children:"High"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Bulk orders"}),(0,t.jsx)(n.td,{children:"Low (1 transaction)"}),(0,t.jsx)(n.td,{children:"Atomic (all or nothing)"}),(0,t.jsx)(n.td,{children:"Low"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"benefits",children:"Benefits"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Lower Gas Fees"})," - Multiple operations batched into a single transaction"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Atomic Execution"})," - All operations execute together, eliminating partial execution risks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Better Performance"})," - Reduces network overhead and speeds up execution"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Complex Strategies"})," - Combine cancellations and new orders in one operation"]}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," Unlike single order placement, bulk placed orders do NOT match with the AMM. They are placed directly into the order book."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/pendle-finance/boros-api-examples/blob/main/examples/11-bulk-place-orders.ts",children:"Bulk Place Orders Example"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"./3.%20api.md#place-orders-calldata",children:"Place Orders API"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"market-management",children:"Market Management"}),"\n",(0,t.jsx)(n.h3,{id:"exit-unused-markets",children:"Exit Unused Markets"}),"\n",(0,t.jsxs)(n.p,{children:["If you have entered markets that are no longer in use, ",(0,t.jsx)(n.strong,{children:"exit them to reduce gas costs"})," on future operations."]}),"\n",(0,t.jsxs)(n.p,{children:["When you enter a market, the system tracks your participation for margin calculations. Each entered market adds overhead to the margin tracker, making it ",(0,t.jsx)(n.strong,{children:"more expensive in gas"})," for every subsequent transaction."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Important limitations:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Maximum 10 entered markets"})," per ",(0,t.jsx)(n.code,{children:"marketAcc"})," (market account)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Maximum 100 active limit orders"})," per ",(0,t.jsx)(n.code,{children:"marketAcc"})," per market"]}),"\n",(0,t.jsx)(n.li,{children:"Entering more markets = heavier margin calculations = higher gas costs"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Exiting unused markets helps:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Reduce gas consumption on all subsequent transactions"}),"\n",(0,t.jsx)(n.li,{children:"Free up slots for new markets (10 market limit)"}),"\n",(0,t.jsx)(n.li,{children:"Improve transaction performance"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"when-to-exit-markets",children:"When to Exit Markets"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"After closing all positions in a market"}),"\n",(0,t.jsx)(n.li,{children:"When you no longer plan to trade a specific market"}),"\n",(0,t.jsx)(n.li,{children:"During account cleanup/maintenance"}),"\n",(0,t.jsx)(n.li,{children:"Before market expiry (for dated markets)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"isolated-only-markets",children:"Isolated-Only Markets"}),"\n",(0,t.jsxs)(n.p,{children:["Some markets are ",(0,t.jsx)(n.strong,{children:"isolated-only"}),", meaning they cannot be traded from a cross-margin account. For these markets:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Deposit to the isolated account"})," - You must transfer collateral specifically to the isolated market account, not the cross-margin account"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Use the correct ",(0,t.jsx)(n.code,{children:"marketAcc"})]})," - Pack the ",(0,t.jsx)(n.code,{children:"marketAcc"})," with the specific ",(0,t.jsx)(n.code,{children:"marketId"})," instead of ",(0,t.jsx)(n.code,{children:"CROSS_MARKET_ID"})]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'import { MarketAccLib } from "@pendle/sdk-boros";\n\n// For isolated-only markets, use the specific marketId\nconst isolatedMarketAcc = MarketAccLib.pack(\n  walletAddress,\n  accountId,\n  tokenId,\n  marketId  // Use the specific market ID, NOT CROSS_MARKET_ID\n);\n'})}),"\n",(0,t.jsx)(n.p,{children:"To fund an isolated account, either:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Direct deposit"}),": Deposit directly to the isolated market using the ",(0,t.jsx)(n.code,{children:"marketId"})," in the deposit calldata"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Cash transfer"}),": Transfer from cross-margin to isolated using the ",(0,t.jsx)(n.code,{children:"/calldata/cash-transfer"})," endpoint with ",(0,t.jsx)(n.code,{children:"isDeposit: true"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example:"})," ",(0,t.jsx)(n.a,{href:"https://github.com/pendle-finance/boros-api-examples/blob/main/examples/13-top-up-isolated-account.ts",children:"Top Up Isolated Account"})]}),"\n",(0,t.jsx)(n.h3,{id:"api-reference",children:"API Reference"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"./3.%20api.md#enterexit-markets-calldata",children:"Enter/Exit Markets API"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"./3.%20api.md#get-account-info",children:"Get Account Info API"})," - Check your entered markets"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"gas-usage-and-estimation",children:"Gas Usage and Estimation"}),"\n",(0,t.jsx)(n.h3,{id:"monitor-gas-balance",children:"Monitor Gas Balance"}),"\n",(0,t.jsx)(n.p,{children:"Boros uses a gas account system for executing agent-signed transactions. Always monitor your gas balance to avoid failed transactions."}),"\n",(0,t.jsx)(n.h3,{id:"arbitrum-gas-spikes",children:"Arbitrum Gas Spikes"}),"\n",(0,t.jsx)(n.p,{children:"Arbitrum gas prices can spike significantly during high network activity. Consider:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Monitor gas prices"})," before submitting transactions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Maintain buffer"})," in your gas account for unexpected spikes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Check gas consumption history"})," to understand your usage patterns"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"api-reference-1",children:"API Reference"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"./3.%20api.md#get-gas-balance",children:"Get Gas Balance API"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"./3.%20api.md#get-gas-consumption-history",children:"Gas Consumption History API"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"./3.%20api.md#pay-treasury-calldata",children:"Pay Treasury (Top Up Gas) API"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/pendle-finance/boros-api-examples/blob/main/examples/12-top-up-gas-account.ts",children:"Top Up Gas Account Example"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Best Practice"}),(0,t.jsx)(n.th,{children:"Why"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Use bulk orders for multiple operations"}),(0,t.jsx)(n.td,{children:"Lower gas, atomic execution"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Exit unused markets (max 10 per account)"}),(0,t.jsx)(n.td,{children:"Reduce gas overhead, free up slots"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["Use correct ",(0,t.jsx)(n.code,{children:"marketAcc"})," for isolated-only markets"]}),(0,t.jsx)(n.td,{children:"Required for trading isolated-only markets"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Monitor gas balance"}),(0,t.jsx)(n.td,{children:"Avoid failed transactions"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["For complete working examples, visit: ",(0,t.jsx)(n.a,{href:"https://github.com/pendle-finance/boros-api-examples",children:"https://github.com/pendle-finance/boros-api-examples"})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var r=s(6540);const t={},i=r.createContext(t);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);