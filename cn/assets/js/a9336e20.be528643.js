"use strict";(self.webpackChunkpendle_documentation=self.webpackChunkpendle_documentation||[]).push([[6354],{3447:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"Developers/HighLevelArchitecture","title":"High Level Architecture","description":"High Level Architecture","source":"@site/docs/pendle-v2/Developers/HighLevelArchitecture.md","sourceDirName":"Developers","slug":"/Developers/HighLevelArchitecture","permalink":"/cn/pendle-v2/Developers/HighLevelArchitecture","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"hide_table_of_contents":true},"sidebar":"myAutogeneratedSidebar","previous":{"title":"Overview","permalink":"/cn/pendle-v2/Developers/Overview"},"next":{"title":"Frequently Asked Questions","permalink":"/cn/pendle-v2/Developers/FAQ"}}');var i=n(4848),s=n(8453);const l={hide_table_of_contents:!0},d="High Level Architecture",c={},o=[{value:"Functions of Contracts",id:"functions-of-contracts",level:2},{value:"PendleRouter",id:"pendlerouter",level:3},{value:"Standardized Yield (SY)",id:"standardized-yield-sy",level:3},{value:"Principal Token (PT)",id:"principal-token-pt",level:3},{value:"Yield Token (YT)",id:"yield-token-yt",level:3},{value:"PendleMarket",id:"pendlemarket",level:3}];function a(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"high-level-architecture",children:"High Level Architecture"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"High Level Architecture",src:n(9394).A+"",title:"High Level Architecture",width:"2250",height:"1376"})}),"\n",(0,i.jsx)(t.h2,{id:"functions-of-contracts",children:"Functions of Contracts"}),"\n",(0,i.jsx)(t.h3,{id:"pendlerouter",children:"PendleRouter"}),"\n",(0,i.jsx)(t.p,{children:"PendleRouter is a contract that aggregates callers' actions with various different SYs, PTs, YTs, and Markets. It does not have any special permissions or whitelists on any contracts it interacts with. Therefore, any third-party protocols can freely embed the router's logic into their code for better gas efficiency."}),"\n",(0,i.jsxs)(t.p,{children:["You can read more about the PendleRouter ",(0,i.jsx)(t.a,{href:"./Contracts/PendleRouter.md",children:"here"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"standardized-yield-sy",children:"Standardized Yield (SY)"}),"\n",(0,i.jsx)(t.p,{children:"SY is a wrapped version of the interest-bearing token (ibToken) that can also be staked into other protocols to earn even more interest. In the Pendle system, SY is used instead of the ibToken for all operations, including trading on PendleMarket or minting Principal Token & Yield Token."}),"\n",(0,i.jsx)(t.p,{children:"The following are true:"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"SY"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"ibToken (1 SY = 1 ib Token)"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"Asset (ibToken appreciates against)"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"SY GLP"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:(0,i.jsx)(t.code,{children:"GLP"})}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"NIL, GLP doesn't appreciate"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"SY wstETH"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:(0,i.jsx)(t.code,{children:"wstETH"})}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"stETH"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"SY ETHx"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:(0,i.jsx)(t.code,{children:"ETHx"})}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"ETH locked in ETHx contract*"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"SY aUSDC"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Not 1-1 to aUSDC since it's rebasing"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"aUSDC"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"SY rETH-WETH_BalancerLP Aura"}),(0,i.jsxs)(t.td,{style:{textAlign:"center"},children:[(0,i.jsx)(t.code,{children:"rETH-WETH LP"})," of Balancer staked into the corresponding Aura's gauge"]}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Liquidity of rETH-WETH pool"})]})]})]}),"\n",(0,i.jsxs)(t.p,{children:["For ",(0,i.jsx)(t.code,{children:"*"}),": ETH locked in ETHx is different from normal ETH due to withdrawal from ETHx has delay. Under normal circumstances it's also normal for ETHx to trade at a market price lower than the amount of ETH it can be withdrawn to."]}),"\n",(0,i.jsx)(t.h3,{id:"principal-token-pt",children:"Principal Token (PT)"}),"\n",(0,i.jsxs)(t.p,{children:["PT is a token that represents the right to redeem for the principal amount at maturity, and is tradable on PendleMarket. While PT represents a claim to a fixed amount of assets, SY wraps an ibToken that increases in value, meaning that ",(0,i.jsx)(t.code,{children:"1 PT != 1 SY"})," is usually true (except in exceptional cases). Instead, ",(0,i.jsx)(t.code,{children:"1 PT = 1 Asset"}),', where "Asset" refers to what SY\'s ibToken is denominated in.']}),"\n",(0,i.jsx)(t.p,{children:"The following are true:"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"PT"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"Asset (1 PT = 1 Asset)"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"PT GLP"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"GLP"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"PT wstETH"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"stETH"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"PT ETHx"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"ETH locked in ETHx contract"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"PT aUSDC"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"aUSDC"})]})]})]}),"\n",(0,i.jsxs)(t.p,{children:["At redemption, ",(0,i.jsx)(t.code,{children:"1 PT = X SY"}),", where ",(0,i.jsx)(t.code,{children:"X"})," satisfies the condition that ",(0,i.jsx)(t.code,{children:"X SY = 1 Asset"}),". For example, assuming ",(0,i.jsx)(t.code,{children:"1 wstETH = 1.2 stETH"})," on 1/1/2024, ",(0,i.jsx)(t.code,{children:"1 PT-wstETH-01JAN2024"})," will be redeemable to ",(0,i.jsx)(t.code,{children:"0.8928 wstETH"})," at maturity."]}),"\n",(0,i.jsx)(t.h3,{id:"yield-token-yt",children:"Yield Token (YT)"}),"\n",(0,i.jsx)(t.p,{children:"YT is a token that represents the rights to redeem the interest generated by the SY until it reaches maturity. It's important to note that the value of YT is zero once it reaches maturity. The yield can be redeemed at any time and it can be traded on PendleMarket using special methods. ibToken generates yield in two forms, which Pendle denotes as:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Interest"})," (compounding yield): The yield is denominated in the same unit as the asset of ibToken. For example, as time goes on, ",(0,i.jsx)(t.code,{children:"wstETH"})," becomes worth more in terms of ",(0,i.jsx)(t.code,{children:"stETH"}),", and ",(0,i.jsx)(t.code,{children:"SY-aUSDC"})," becomes worth more in terms of ",(0,i.jsx)(t.code,{children:"USDC"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Rewards"})," (yield that does not compound): The yield is given out in a different unit than the ibToken. For example, GLP generates ETH."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"The following are true:"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"YT"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"Interest"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"Rewards"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"YT GLP"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"-"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"ETH"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"YT wstETH"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"stETH"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"-"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"YT ETHx"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"ETH locked in ETHx contract"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"-"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"YT aUSDC"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"aUSDC"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"-"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"YT rETH-WETH_BalancerLP Aura"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"liquidity of rETH-WETH pool"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"AURA, BAL"})]})]})]}),"\n",(0,i.jsxs)(t.p,{children:["PT and YT are minted and redeemed using the YT contract. To mint PT and YT, SY is utilized. ",(0,i.jsx)(t.code,{children:"1 SY = X PT + X YT"})," is created where ",(0,i.jsx)(t.code,{children:"1 SY = X Asset"}),". Prior to maturity, both PT and YT must be provided to redeem the underlying SY. After maturity, only PT is required for redemption."]}),"\n",(0,i.jsx)(t.h3,{id:"pendlemarket",children:"PendleMarket"}),"\n",(0,i.jsx)(t.p,{children:"PendleMarket (or simply Market) is a contract that enables users to trade between PT and its corresponding SY, while still allowing liquidity provision as usual. Swap fees are directly compounded into the LP. Each Market also has its own built-in geometric-mean oracle, similar to UniswapV3."}),"\n",(0,i.jsx)(t.p,{children:"Currently, there is no market to trade YT, but it is always tradable by the following algorithms:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"SY \u279d YT"})," = flashswap SY, mint PT & YT, payback PT, send YT to users."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"YT \u279d SY"})," = flashswap PT, use PT & YT, redeem SY, pay back, send excess to users."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>d});var r=n(6540);const i={},s=r.createContext(i);function l(e){const t=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(s.Provider,{value:t},e.children)}},9394:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/high_level_architecture-457bcdd55f399a2d90b8c7bd9e2b6a09.png"}}]);