"use strict";(self.webpackChunkpendle_documentation=self.webpackChunkpendle_documentation||[]).push([[8162],{2570:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"Backend-legacy/WebSocket","title":"Boros WebSocket","description":"This guide explains how to directly connect to Boros\'s WebSocket service using Socket.IO client.","source":"@site/docs/boros-dev-docs/Backend-legacy/WebSocket.mdx","sourceDirName":"Backend-legacy","slug":"/Backend-legacy/WebSocket","permalink":"/cn/boros-dev/Backend-legacy/WebSocket","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var c=s(4848),o=s(8453);const r={},i="Boros WebSocket",l={},a=[{value:"Basic Usage",id:"basic-usage",level:2},{value:"Connection Events",id:"connection-events",level:2},{value:"Handling Connection",id:"handling-connection",level:3},{value:"Subscribing to Channels",id:"subscribing-to-channels",level:2},{value:"Cleanup",id:"cleanup",level:2},{value:"Channel Types",id:"channel-types",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Example Implementation",id:"example-implementation",level:2},{value:"Error Handling",id:"error-handling",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"boros-websocket",children:"Boros WebSocket"})}),"\n",(0,c.jsx)(n.p,{children:"This guide explains how to directly connect to Boros's WebSocket service using Socket.IO client."}),"\n",(0,c.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,c.jsx)(n.p,{children:"Here's a complete example of how to connect to and use the WebSocket:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-text",children:"import { io } from 'socket.io-client';\n\n// Initialize the socket connection\nconst socket = io('wss://api.boros.finance/pendle-dapp-v3', {\n  path: '/socket/socket.io',\n  reconnectionAttempts: 5,\n  transports: ['websocket']\n});\n"})}),"\n",(0,c.jsx)(n.h2,{id:"connection-events",children:"Connection Events"}),"\n",(0,c.jsx)(n.h3,{id:"handling-connection",children:"Handling Connection"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-text",children:"socket.on('connect', () => {\n  console.log('Connected to WebSocket server');\n});\n\nsocket.on('disconnect', () => {\n  console.log('Disconnected from WebSocket server');\n});\n\nsocket.on('connect_error', (error) => {\n  console.error('Connection error:', error);\n});\n"})}),"\n",(0,c.jsx)(n.h2,{id:"subscribing-to-channels",children:"Subscribing to Channels"}),"\n",(0,c.jsx)(n.p,{children:"To receive updates, you need to:"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsx)(n.li,{children:"Subscribe to a channel"}),"\n",(0,c.jsx)(n.li,{children:"Listen for updates on that channel"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-text",children:"// Subscribe to a channel\nsocket.emit('subscribe', 'statistics:MARKET_ID');\n\n// Listen for updates\nsocket.on('statistics:MARKET_ID:update', (data) => {\n  console.log('Received market statistics update:', data);\n});\n"})}),"\n",(0,c.jsx)(n.h2,{id:"cleanup",children:"Cleanup"}),"\n",(0,c.jsx)(n.p,{children:"Always clean up your WebSocket connections when they're no longer needed:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-text",children:"function cleanup() {\n  // Unsubscribe from channels\n  socket.emit('unsubscribe', 'statistics:MARKET_ID');\n\n  // Remove listeners\n  socket.off('statistics:MARKET_ID:update');\n\n  // Disconnect\n  socket.disconnect();\n}\n"})}),"\n",(0,c.jsx)(n.h2,{id:"channel-types",children:"Channel Types"}),"\n",(0,c.jsx)(n.p,{children:"Common channel patterns:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"orderbook:MARKET_ID:TICK_SIZE"})," \u2013 Orderbook updates for the given market, where TICK_SIZE refers to the price granularity. Accepted TICK_SIZE values are: 0.1, 0.01, 0.001, 0.0001, and 0.00001."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"market-trade:MARKET_ID"})," - Market trade updates"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"statistics:MARKET_ID"})," - Market statistics updates"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["Replace ",(0,c.jsx)(n.code,{children:"MARKET_ID"})," with your specific market identifier."]}),"\n",(0,c.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Connection Management"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Always handle connection errors"}),"\n",(0,c.jsx)(n.li,{children:"Implement reconnection logic if needed"}),"\n",(0,c.jsx)(n.li,{children:"Clean up connections when no longer needed"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Event Handling"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Subscribe to channels after connection is established"}),"\n",(0,c.jsx)(n.li,{children:"Remove listeners before disconnecting"}),"\n",(0,c.jsx)(n.li,{children:"Handle potential errors in data processing"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Resource Management"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Unsubscribe from channels you no longer need"}),"\n",(0,c.jsx)(n.li,{children:"Don't create multiple connections unnecessarily"}),"\n",(0,c.jsx)(n.li,{children:"Clean up resources when your application closes"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"example-implementation",children:"Example Implementation"}),"\n",(0,c.jsx)(n.p,{children:"Here's a complete example putting it all together:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-text",children:"import { io } from 'socket.io-client';\n\nclass PendleWebSocket {\n  private socket: any;\n\n  constructor() {\n    this.socket = io('wss://secrettune.io/pendle-dapp-v3', {\n      path: '/socket.io',\n      reconnectionAttempts: 5,\n      transports: ['websocket']\n    });\n\n    this.setupEventHandlers();\n  }\n\n  private setupEventHandlers() {\n    this.socket.on('connect', () => {\n      console.log('Connected to WebSocket server');\n    });\n\n    this.socket.on('disconnect', () => {\n      console.log('Disconnected from WebSocket server');\n    });\n\n    this.socket.on('connect_error', (error) => {\n      console.error('Connection error:', error);\n    });\n  }\n\n  public subscribeToMarket(marketId: string) {\n    const channel = `statistics:${marketId}`;\n    this.socket.emit('subscribe', channel);\n\n    this.socket.on(`${channel}:update`, (data) => {\n      console.log(`Received update for ${marketId}:`, data);\n    });\n  }\n\n  public unsubscribeFromMarket(marketId: string) {\n    const channel = `statistics:$\\{marketId\\}`;\n    this.socket.emit('unsubscribe', channel);\n    this.socket.off(`${channel}:update`);\n  }\n\n  public disconnect() {\n    this.socket.disconnect();\n  }\n}\n\n// Usage example:\nconst ws = new PendleWebSocket();\nws.subscribeToMarket('YOUR_MARKET_ID');\n\n// Clean up when done\n// ws.unsubscribeFromMarket('YOUR_MARKET_ID');\n// ws.disconnect();\n"})}),"\n",(0,c.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,c.jsx)(n.p,{children:"Always implement proper error handling:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-text",children:"socket.on('connect_error', (error) => {\n  console.error('Connection failed:', error);\n  // Implement your error handling logic\n});\n\nsocket.on('error', (error) => {\n  console.error('Socket error:', error);\n  // Implement your error handling logic\n});\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>i});var t=s(6540);const c={},o=t.createContext(c);function r(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);