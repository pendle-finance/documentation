"use strict";(self.webpackChunkpendle_documentation=self.webpackChunkpendle_documentation||[]).push([[6029],{7107:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>d,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"LitePaper","title":"Boros Lite Paper","description":"This document outlines how Boros works in a more high level and user-centric manner. Exact formal definitions and formulas can be found in the whitepaper.","source":"@site/docs/boros-dev-docs/LitePaper.mdx","sourceDirName":".","slug":"/LitePaper","permalink":"/cn/boros-dev/LitePaper","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"hide_table_of_contents":true},"sidebar":"borosSidebar","previous":{"title":"\ud83d\udcd6 Introduction","permalink":"/cn/boros-dev/"},"next":{"title":"\ud83c\udfd7\ufe0f High Level Architecture","permalink":"/cn/boros-dev/HighLevelArchitecture"}}');var r=i(4848),t=i(8453);const l={hide_table_of_contents:!0},a="Boros Lite Paper",o={},c=[{value:"Interest rate swap mechanics",id:"interest-rate-swap-mechanics",level:3},{value:"Interest rate swap markets",id:"interest-rate-swap-markets",level:3},{value:"Interest rate swap trading zone",id:"interest-rate-swap-trading-zone",level:3},{value:"Orderbook for matching swaps",id:"orderbook-for-matching-swaps",level:3},{value:"Important terms and mechanics, using an example",id:"important-terms-and-mechanics-using-an-example",level:3}];function h(e){const n={a:"a",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"boros-lite-paper",children:"Boros Lite Paper"})}),"\n",(0,r.jsxs)(n.p,{children:["This document outlines how Boros works in a more high level and user-centric manner. Exact formal definitions and formulas can be found in the ",(0,r.jsx)(n.a,{href:"https://github.com/pendle-finance/boros-core-public/blob/main/whitepapers/AMM.pdf",children:"whitepaper"}),"."]}),"\n",(0,r.jsx)(n.h1,{id:"how-does-boros-work-from-a-user-perspective",children:"How does Boros work from a user perspective?"}),"\n",(0,r.jsx)(n.h3,{id:"interest-rate-swap-mechanics",children:"Interest rate swap mechanics"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Users can open ",(0,r.jsx)(n.strong,{children:"interest rate swap positions"})," to speculate on ",(0,r.jsx)(n.strong,{children:"interests"})," of certain asset."]}),"\n",(0,r.jsxs)(n.li,{children:["An ",(0,r.jsx)(n.strong,{children:"interest rate swap position"})," = user has to pay an ",(0,r.jsx)(n.strong,{children:"interest stream"})," and receive another ",(0,r.jsx)(n.strong,{children:"interest stream"})," until a ",(0,r.jsx)(n.strong,{children:"maturity"}),". There are only two possible scenarios:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Receive the ",(0,r.jsx)(n.strong,{children:"floating interest"}),", and pay a ",(0,r.jsx)(n.strong,{children:"fixed interest"})]}),"\n",(0,r.jsxs)(n.li,{children:["Receive a ",(0,r.jsx)(n.strong,{children:"fixed interest"}),", and pay the ",(0,r.jsx)(n.strong,{children:"floating interest"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"floating interest"})," = the current interest (underlying APY in V2), ",(0,r.jsx)(n.strong,{children:"always in APR"}),", being determined by ",(0,r.jsx)(n.strong,{children:"an external oracle"})]}),"\n",(0,r.jsxs)(n.li,{children:["What is the ",(0,r.jsx)(n.strong,{children:"fixed interest"})," that the user has to pay?","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["It's specific to each user's position and it's basically based on demand and supply in Boros ",(0,r.jsx)(n.strong,{children:"when the user opens the position"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Example:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Today, the fixed interest level (or Implied APR) being traded in Boros is 5% for ETHUSDT funding rate market."}),"\n",(0,r.jsx)(n.li,{children:"Alice gets an interest swap position (pay fixed, get floating) at the current 5% fixed rate \u21d2 Alice can hold this position all the way to the maturity and pay 5% APR all the way, while getting the floating interest along the way."}),"\n",(0,r.jsx)(n.li,{children:"The next day, the fixed interest level (implied interest) being traded in Boros is 6%. However, Alice is still paying 5% in her interest rate swap position. Alice's position is already locked in at 5% fixed rate."}),"\n",(0,r.jsxs)(n.li,{children:['However, Alice can "sell the current swap position" by essentially creating another opposite position of (pay floating, get fixed) of the same magnitude to ',(0,r.jsx)(n.strong,{children:"close"})," the current position. Depending on the difference between the fixed rate of the user's position and the current fixed rate being traded, the sale of the user's position can be deemed a net loss or profit."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"interest-rate-swap-markets",children:"Interest rate swap markets"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"For users to start holding and trading interest rate swaps, there has to be a market created for it."}),"\n",(0,r.jsxs)(n.li,{children:["Each interest rate swap market has a few main attributes:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The external oracle for floating interest rate. This defines which interest the users will be trading. For example: Binance ETHUSDT Perp Funding Rate"}),"\n",(0,r.jsx)(n.li,{children:"The base asset (like ETH for trading Binance ETHUSDT Perp), which is used for accounting profit/loss and denominating the position sizes."}),"\n",(0,r.jsx)(n.li,{children:"The maturity for the interest rate swap positions"}),"\n",(0,r.jsx)(n.li,{children:"Parameters to control the risks for the market"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:'Each market will have a "Mark Rate", which is the market Implied APR that will be used to value user positions\' unrealized profits and loss. This Mark Rate will be a TWAP-like oracle taking from historical trades.'}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"interest-rate-swap-trading-zone",children:"Interest rate swap trading zone"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Users must deposit ",(0,r.jsx)(n.strong,{children:"collateral"}),' in terms of base asset into a "trading zone", to open interest rate swaps.']}),"\n",(0,r.jsxs)(n.li,{children:["Each trading zone comprises of multiple interest rate swap markets of the same base asset.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:['For example: an "ETH trading zone" could have the following markets:',"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Binance ETHUSDT Funding Rate, 27 Dec 2024 Maturity"}),"\n",(0,r.jsx)(n.li,{children:"Binance ETHUSDT Funding Rate, 28 March 2025 Maturity"}),"\n",(0,r.jsx)(n.li,{children:"Deribit ETHUSDT Funding Rate, 28 March 2025 Maturity"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["To open a new interest rate swap, a user must satisfy the ",(0,r.jsx)(n.strong,{children:"initial margin requirements"})," for the position they want to open."]}),"\n",(0,r.jsxs)(n.li,{children:["Users must maintain enough collateral to cover the ",(0,r.jsx)(n.strong,{children:"maintenance margin requirements"})," for their open positions, otherwise they could be liquidated."]}),"\n",(0,r.jsx)(n.li,{children:"User's health and liquidations are trading-zone-specific."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"orderbook-for-matching-swaps",children:"Orderbook for matching swaps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Each Boros market has a native orderbook to facilitating opening swaps."}),"\n",(0,r.jsxs)(n.li,{children:["Users can open a new swap in two ways:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Open a limit order on the orderbook and wait for someone to take their order, creating a pair of swaps between the two users."}),"\n",(0,r.jsx)(n.li,{children:"Do a market order, filling an existing limit orders, creating a pair of swaps between the two users."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"important-terms-and-mechanics-using-an-example",children:"Important terms and mechanics, using an example"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Example market: ETHUSDT funding rates on Binance","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Maturity: in 6 months (June 2025)"}),"\n",(0,r.jsxs)(n.li,{children:["Liquidation Incentive Factor:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Starts at 10%, linearly increases to 50% when marginRatio = 0.5"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Initial Margin Rate:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"50% of Mark Rate, with a minimum of 5% (I_threshold = 10%)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Maintenance Margin Rate:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"25% of Mark Rate, with a minimum of 2.5%"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["6 months before maturity","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Alice wants to gets a ",(0,r.jsx)(n.strong,{children:"swap position"})," with ",(0,r.jsx)(n.strong,{children:"size = 10 ETH"}),", ",(0,r.jsx)(n.strong,{children:"paying fixed and receiving floating (Long Rate)"})]}),"\n",(0,r.jsx)(n.li,{children:"Alice deposits 0.4 ETH collateral into the ETH trading zone."}),"\n",(0,r.jsx)(n.li,{children:"Current Mark Rate is 12%"}),"\n",(0,r.jsxs)(n.li,{children:["Alice is good to pay a fixed rate of 12% (and below), so she offers to pay 12% fixed rate on 10 ETH to get the floating interest stream, by placing an order in an on-chain orderbook.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Initial Margin Rate"})," is 50% * 12% = 6%"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Initial margin needed"})," for this position = 10 * 0.5 years * 6% = 0.3 ETH out of Alice's 0.4 ETH collateral. Alice's available initial margin left is 0.1 ETH after placing the limit order."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Bob is another user who wants to pay the ",(0,r.jsx)(n.strong,{children:"floating rate"})," in exchange for a ",(0,r.jsx)(n.strong,{children:"fixed rate"}),". Bob is good to receive 12% fixed (and above) on 10 ETH, do a market order on the orderbook and fills Alice's limit order."]}),"\n",(0,r.jsxs)(n.li,{children:["Now, a pair of swap between Alice is Bob is created and:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Alice has","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:['0.4 ETH in collateral, minus a debt of 12% * 10 * 0.5 = 0.6 ETH that is "realized" immediately',"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["= -0.2 ETH ",(0,r.jsx)(n.strong,{children:"collateral"}),' (it\'s ok to have negative "collateral" because there is still the value of the floating leg)']}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["A ",(0,r.jsx)(n.strong,{children:"position"})," of ",(0,r.jsx)(n.strong,{children:'"10 ETH paying fixed 12% (already paid upfront) & receiving floating until June 2025"'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Note that from the contract perspective, we don't track and don't care about the number 12%, because it's already paid upfront"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.strong,{children:"Mark rate"})," in the ETHUSDT Dec 2024 ",(0,r.jsx)(n.strong,{children:"interest rate swap market"})," is currently ",(0,r.jsx)(n.strong,{children:"12%"})," (it's a TWAP rate)"]}),"\n",(0,r.jsxs)(n.li,{children:["Alice's ",(0,r.jsx)(n.strong,{children:"swap position"})," has a ",(0,r.jsx)(n.strong,{children:'"unrealized PnL"'})," of 12% * 10ETH * 0.5 years = ",(0,r.jsx)(n.strong,{children:"0.6 ETH"})," because the floating stream is currently valued at 12%"]}),"\n",(0,r.jsxs)(n.li,{children:["Alice has 0 ",(0,r.jsx)(n.strong,{children:"realized PnL"})," because she has just opened the swap"]}),"\n",(0,r.jsxs)(n.li,{children:["Alice has a ",(0,r.jsx)(n.strong,{children:"current"})," ",(0,r.jsx)(n.strong,{children:"total value"})," = ",(0,r.jsx)(n.strong,{children:"collateral value"})," + ",(0,r.jsx)(n.strong,{children:"unrealized PNL = -0.2 + 0.6 = 0.4 ETH"})]}),"\n",(0,r.jsx)(n.li,{children:"Alice's total initial margin consumed is 0.3 ETH"}),"\n",(0,r.jsxs)(n.li,{children:["Alice's total maintenance margin required is 10 * 0.5 years * 3% = 0.15 ETH","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"(Margin rate = 25% * 12% = 3%)"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Alice's health ratio is 0.4 / 0.15 = 2.67 (healthy)"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["After 1 months, (5 ",(0,r.jsx)(n.strong,{children:"months"})," before maturity), the average ETH funding rate has been 10%. Now, let's say the ",(0,r.jsx)(n.strong,{children:"mark rate"})," is 5% (traders on Boros collectively thinks the average future rate is at 5%)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["At this point, Alice has","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["A ",(0,r.jsx)(n.strong,{children:"swap position"})," of ",(0,r.jsx)(n.strong,{children:'"10 ETH, paying 12% fixed (paid upfront) & receiving floating until June 2025"'})," [Same]"]}),"\n",(0,r.jsxs)(n.li,{children:["Alice's ",(0,r.jsx)(n.strong,{children:"swap position"})," has a ",(0,r.jsx)(n.strong,{children:'"unrealized PnL"'})," of: 5% * (5 months / 12 months) * 10 ETH = 0.2083 ",(0,r.jsx)(n.strong,{children:"ETH"})]}),"\n",(0,r.jsxs)(n.li,{children:["Alice has ",(0,r.jsx)(n.strong,{children:"realized PnL"})," = 10% * (1 months / 12 months) * 10 ETH = +0.08333 ETH = total floating stream payments over the 1 month","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["All realized PnL ",(0,r.jsx)(n.strong,{children:"gets reflected in the collateral value"})," immediately"]}),"\n",(0,r.jsxs)(n.li,{children:["New ",(0,r.jsx)(n.strong,{children:"collateral value"})," = -0.2 + 0.08333 = -0.1167 ETH"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Alice has a ",(0,r.jsx)(n.strong,{children:"current total value"})," = ",(0,r.jsx)(n.strong,{children:"collateral value"})," + ",(0,r.jsx)(n.strong,{children:"unrealized PnL"})," = -0.1167 + 0.2083 = 0.0916 ETH"]}),"\n",(0,r.jsxs)(n.li,{children:["Alice's maintenance margin required is: 10 ETH * 5/12 years * 2.5% = 0.1042 ETH","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Maintenance margin rate is 2.5%, since 25% of Mark rate = 25% * 5% is below the min 2.5%"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Alice's margin ratio is ",(0,r.jsx)(n.strong,{children:"0.0916"})," / 0.1042 = 0.88 < 1 \u21d2 unhealthy"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Charlie liquidates 100% of Alice's position (5 months before maturity)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Before liquidation, Charlie has:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"10 ETH collateral"}),"\n",(0,r.jsx)(n.li,{children:"0 position"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["When liquidation happens, two steps happen:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Step 1: A swap of 10ETH happens between Charlie and Alice at the current Mark Price (5%)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["For Charlie:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'Charlie will hold a position of "10 ETH, paying 5% (paid upfront) & receiving floating until June 2025"'}),"\n",(0,r.jsx)(n.li,{children:"The debt of 10 * 5% * 5/12 = -0.2083 is realized into Charlie collateral"}),"\n",(0,r.jsx)(n.li,{children:"Charlie's collateral is 10ETH-0.2083ETH = 9.7917 ETH now"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["For Alice:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:['Alice\'s new swap of "10 ETH, receiving 5% (paid upfront) & paying floating until June 2025" is merged with her existing position of "10 ETH, paying 12% fixed (paid upfront) & receiving floating until June 2025"',"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The result of the merge is a 0 position, and getting paid upfront for the new debt of -10 * 5% * 5/12 = -0.2083 ETH"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Alice's collateral is now -0.1167 - (-0.2083) = 0.0916 ETH"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Step 2: A liquidation incentive is transferred from Alice's collateral to Charlie's collateral","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Since Alice's margin Ratio is 0.88, the liquidation incentive factor is 19.6% (it linearly goes up from 10% to 50% as margin ratio goes down from 1 to 0.5)"}),"\n",(0,r.jsx)(n.li,{children:"After the liquidation, Alice's maintenance margin goes down by 0.1042 ETH"}),"\n",(0,r.jsx)(n.li,{children:"Liquidation incentives = 19.6% * 0.1042 = 0.0204 ETH"}),"\n",(0,r.jsx)(n.li,{children:"As such, 0.0204 ETH is transferred from Alice's collateral to Charlie's collateral"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Final states:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Alice:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"0 position"}),"\n",(0,r.jsx)(n.li,{children:"Collateral = 0.0916 - 0.0204 = 0.0712 ETH"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Charlie:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'a position of "10 ETH, paying 5% (paid upfront) & receiving floating until June 2025"'}),"\n",(0,r.jsx)(n.li,{children:"Collateral = 9.7917 + 0.0204 = 9.8121 ETH"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);