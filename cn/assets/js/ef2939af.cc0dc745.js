"use strict";(self.webpackChunkpendle_documentation=self.webpackChunkpendle_documentation||[]).push([[9971],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>k});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),d=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=d(e.components);return n.createElement(o.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=d(a),u=r,k=c["".concat(o,".").concat(u)]||c[u]||m[u]||i;return a?n.createElement(k,l(l({ref:t},p),{},{components:a})):n.createElement(k,l({ref:t},p))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=u;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[c]="string"==typeof e?e:r,l[1]=s;for(var d=2;d<i;d++)l[d]=a[d];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},9395:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var n=a(7462),r=(a(7294),a(3905));const i={hide_table_of_contents:!0},l="Backend and Hosted SDK",s={unversionedId:"Developers/Backend/BackendAndHostedSDK",id:"Developers/Backend/BackendAndHostedSDK",title:"Backend and Hosted SDK",description:"Pendle Backend offers developers accurate and up-to-date data, empowering them to build and innovate with the latest protocol information.",source:"@site/docs/Developers/Backend/BackendAndHostedSDK.md",sourceDirName:"Developers/Backend",slug:"/Developers/Backend/BackendAndHostedSDK",permalink:"/cn/Developers/Backend/BackendAndHostedSDK",draft:!1,tags:[],version:"current",frontMatter:{hide_table_of_contents:!0},sidebar:"myAutogeneratedSidebar",previous:{title:"Choosing Linear Discount Parameters",permalink:"/cn/Developers/Oracles/DeterministicOracles/ChoosingLinearDiscountParams"},next:{title:"RouterStatic",permalink:"/cn/Developers/Backend/RouterStatic"}},o={},d=[{value:"Pendle Hosted SDK",id:"pendle-hosted-sdk",level:2},{value:"Supported functions",id:"supported-functions",level:3},{value:"Features",id:"features",level:3},{value:"Routing",id:"routing",level:4},{value:"Select aggregators",id:"select-aggregators",level:5},{value:"Additional data",id:"additional-data",level:4},{value:"Migrations",id:"migrations",level:4},{value:"Pendle Restful API",id:"pendle-restful-api",level:2},{value:"Markets API",id:"markets-api",level:3},{value:"Assets API",id:"assets-api",level:3},{value:"Pricing and OHLCV API",id:"pricing-and-ohlcv-api",level:3},{value:"vePendle Governance API",id:"vependle-governance-api",level:3},{value:"User Analytics API",id:"user-analytics-api",level:3},{value:"Statistics and Analytics API",id:"statistics-and-analytics-api",level:3},{value:"Merkle Distribution API",id:"merkle-distribution-api",level:3},{value:"Get List of Active Markets",id:"get-list-of-active-markets",level:3},{value:"Get Latest Market Data",id:"get-latest-market-data",level:3},{value:"Fetch Historical Market Data",id:"fetch-historical-market-data",level:3},{value:"Get Metadata for All Assets",id:"get-metadata-for-all-assets",level:3},{value:"Get Voter APR and Fee Data",id:"get-voter-apr-and-fee-data",level:3},{value:"Get Vote Snapshot",id:"get-vote-snapshot",level:3},{value:"Rate limiting",id:"rate-limiting",level:2},{value:"Rate limiting method",id:"rate-limiting-method",level:3},{value:"Cost calculation",id:"cost-calculation",level:3},{value:"Rate limit headers",id:"rate-limit-headers",level:3}],p={toc:d},c="wrapper";function m(e){let{components:t,...i}=e;return(0,r.kt)(c,(0,n.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"backend-and-hosted-sdk"},"Backend and Hosted SDK"),(0,r.kt)("p",null,"Pendle Backend offers developers accurate and up-to-date data, empowering them to build and innovate with the latest protocol information."),(0,r.kt)("p",null,"Pendle backend is hosted at ",(0,r.kt)("a",{parentName:"p",href:"https://api-v2.pendle.finance/core/docs"},"https://api-v2.pendle.finance/core/docs")),(0,r.kt)("p",null,"Our Pendle Backend include two core features: Pendle Hosted SDK and Pendle API."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Pendle Hosted SDK"),": Offers a more optimized and efficient way to interact with the Pendle Router to buy and sell PTs/YTs, add/remove liquidity, and more.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Code with examples: ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/pendle-finance/pendle-examples-public/tree/main/hosted-sdk-demo/src"},"Pendle Hosted SDK demo")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Pendle API"),": Provides developers with accurate and up-to-date data, empowering them to build and innovate with the latest protocol information.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Code with examples: ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/pendle-finance/pendle-examples-public/blob/main/backend-api-demo/src/index.ts"},"Pendle Backend API demo"))))),(0,r.kt)("h2",{id:"pendle-hosted-sdk"},"Pendle Hosted SDK"),(0,r.kt)("p",null,"Pendle accommodates a vast array of assets, each characterized by its unique nuances and complexities. While the Pendle protocol remains immutable, the underlying assets don't share this feature, requiring our app and SDK to be updated frequently to align with changes in these assets."),(0,r.kt)("p",null,"To address this, Pendle has introduced a hosted version of our SDK. It ensures the output remains consistent with Pendle's UI and keeps up-to-date with the latest protocol changes. The API design prioritizes simplicity and stability, with a high rate limit to meet the needs of most users."),(0,r.kt)("h3",{id:"supported-functions"},"Supported functions"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Swap"),(0,r.kt)("li",{parentName:"ul"},"Add liquidity"),(0,r.kt)("li",{parentName:"ul"},"Remove liquidity"),(0,r.kt)("li",{parentName:"ul"},"Mint PT & YT"),(0,r.kt)("li",{parentName:"ul"},"Redeem PT & YT"),(0,r.kt)("li",{parentName:"ul"},"Transfer liquidity"),(0,r.kt)("li",{parentName:"ul"},"Roll over PT"),(0,r.kt)("li",{parentName:"ul"},"Add liquidity dual"),(0,r.kt)("li",{parentName:"ul"},"Remove liquidity dual"),(0,r.kt)("li",{parentName:"ul"},"Mint SY"),(0,r.kt)("li",{parentName:"ul"},"Redeem SY")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example")),(0,r.kt)("p",null,"To get calldata and info of swapping ",(0,r.kt)("strong",{parentName:"p"},"1000 USDC")," to ",(0,r.kt)("strong",{parentName:"p"},"PT stETH")," in ",(0,r.kt)("strong",{parentName:"p"},"stETH (0x34280882267ffa6383b363e278b027be083bbe3b)")," with 1% slippage:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"SDK swap",src:a(9538).Z,title:"SDK swap",width:"3440",height:"1816"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"GET https://api-v2.pendle.finance/core/v2/sdk/1/markets/0x34280882267ffa6383b363e278b027be083bbe3b/swap?receiver=<RECEIVER_ADDRESS>&slippage=0.01&enableAggregator=true&aggregators=kyberswap&tokenIn=0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48&tokenOut=0xb253eff1104802b97ac7e3ac9fdd73aece295a2c&amountIn=1000000000&additionalData=impliedApy\n")),(0,r.kt)("p",null,"In code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'export async function swapTokenToPt() {\n  // Swap 1 USDC to PT in stETH market with 1% slippage\n  const res = await callSDK<SwapData>(`/v2/sdk/${CHAIN_ID}/markets/${MARKET_ADDRESS}/swap`, {\n    receiver: RECEIVER_ADDRESS,\n    slippage: 0.01,\n    tokenIn: USDC_ADDRESS,\n    tokenOut: PT_ADDRESS,\n    amountIn: "1000000000",\n    enableAggregator: true,\n    aggregators: "kyberswap",\n  });\n\n  console.log("Amount PT Out: ", res.data.amountOut);\n  console.log("Price impact: ", res.data.priceImpact);\n\n  // Send tx\n  getSigner().sendTransaction(res.tx);\n}\n')),(0,r.kt)("p",null,"To add liquidity of 1 ETH to ",(0,r.kt)("strong",{parentName:"p"},"stETH (0x34280882267ffa6383b363e278b027be083bbe3b)")," with 1% slippage"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"SDK add liquidity",src:a(2037).Z,title:"SDK add liquidity",width:"3432",height:"1794"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"GET https://api-v2.pendle.finance/core/v2/sdk/1/markets/0x34280882267ffa6383b363e278b027be083bbe3b/add-liquidity?receiver=<RECEIVER_ADDRESS>&slippage=0.01&enableAggregator=true&aggregators=kyberswap&tokenIn=0x0000000000000000000000000000000000000000&amountIn=1000000000000000000&zpi=false&additionalData=impliedApy\n")),(0,r.kt)("p",null,"In code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'export async function addLiquiditySingleToken() {\n  // Use 1 ETH to add liquidity to stETH pool with 1% slippage\n  const res = await callSDK<AddLiquidityData>(`/v2/sdk/${CHAIN_ID}/markets/${MARKET_ADDRESS}/add-liquidity`, {\n    receiver: RECEIVER_ADDRESS,\n    slippage: 0.01,\n    tokenIn: ETH_ADDRESS,\n    amountIn: "1000000000000000000",\n    enableAggregator: true,\n    aggregators: "kyberswap",\n  });\n\n  console.log("Amount LP Out: ", res.data.amountLpOut);\n  console.log("Price impact: ", res.data.priceImpact);\n\n  // Send tx\n  getSigner().sendTransaction(res.tx);\n}\n')),(0,r.kt)("p",null,"Please visit our ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pendle-finance/pendle-examples-public/tree/main/hosted-sdk-demo/src"},"Pendle Hosted SDK demo")," to see more detailed examples."),(0,r.kt)("h3",{id:"features"},"Features"),(0,r.kt)("h4",{id:"routing"},"Routing"),(0,r.kt)("p",null,"Routing is a feature of the Pendle SDK that helps users find the most optimal route to interact with the Pendle system. This feature ensures that users can efficiently execute their transactions by identifying the best paths for their specific needs, whether it's swapping assets, adding or removing liquidity, or any other supported function."),(0,r.kt)("p",null,"To take advantage of the routing feature, users need to set the ",(0,r.kt)("inlineCode",{parentName:"p"},"enableAggregator")," option to ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),". When this option is enabled, the system will automatically perform routing to find the most optimal route for the user's transaction. This ensures that users always get the best possible outcome when interacting with the Pendle system."),(0,r.kt)("h5",{id:"select-aggregators"},"Select aggregators"),(0,r.kt)("p",null,"When ",(0,r.kt)("inlineCode",{parentName:"p"},"enableAggregator")," is set to ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),", you can control which aggregators are used by specifying the ",(0,r.kt)("inlineCode",{parentName:"p"},"aggregators"),' parameter. This parameter accepts a comma-separated list of aggregator names (e.g. "kyberswap,odos"). If not specified, the system will use all available aggregators to find the optimal route.'),(0,r.kt)("p",null,"Using more aggregators generally results in better optimized routes since there are more options to choose from. However, each aggregator adds to the computing unit cost of the request (see ",(0,r.kt)("a",{parentName:"p",href:"#rate-limiting"},"rate limiting"),"). You can balance between optimization and cost by selectively enabling only the aggregators you want to use."),(0,r.kt)("p",null,"Currently supported aggregators (can be fetched from ",(0,r.kt)("a",{parentName:"p",href:"https://api-v2.pendle.finance/core/docs#/SDK/SdkController_getSupportedAggregators"},"fetch supported aggregators")," endpoint), this list is subject to change:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Aggregator"),(0,r.kt)("th",{parentName:"tr",align:null},"Cost (Computing Units)"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"kyberswap")),(0,r.kt)("td",{parentName:"tr",align:null},"5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"odos")),(0,r.kt)("td",{parentName:"tr",align:null},"15")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"okx")),(0,r.kt)("td",{parentName:"tr",align:null},"10")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"paraswap")),(0,r.kt)("td",{parentName:"tr",align:null},"15")))),(0,r.kt)("p",null,"Example, this request will use KyberSwap and Odos aggregators to find the optimal route, and it cost 25 computing units (5 from kyberswap, 15 from odos, and 5 from the base computing cost):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'export async function addLiquiditySingleToken() {\n  // Use 1 ETH to add liquidity to stETH pool with 1% slippage\n  const res = await callSDK<AddLiquidityData>(`/v2/sdk/${CHAIN_ID}/markets/${MARKET_ADDRESS}/add-liquidity`, {\n    receiver: RECEIVER_ADDRESS,\n    slippage: 0.01,\n    tokenIn: ETH_ADDRESS,\n    amountIn: "1000000000000000000",\n    enableAggregator: true,\n    aggregators: "kyberswap,odos",\n  });\n\n  console.log("Amount LP Out: ", res.data.amountLpOut);\n  console.log("Price impact: ", res.data.priceImpact);\n\n  // Send tx\n  getSigner().sendTransaction(res.tx);\n}\n')),(0,r.kt)("h4",{id:"additional-data"},"Additional data"),(0,r.kt)("p",null,"When an endpoint has an ",(0,r.kt)("inlineCode",{parentName:"p"},"additionalData")," field, users can pass in some fields to receive more data, but it will cost more computing units."),(0,r.kt)("p",null,"For example, our ",(0,r.kt)("strong",{parentName:"p"},"swap")," endpoint has ",(0,r.kt)("inlineCode",{parentName:"p"},"additionalData")," with two available fields: ",(0,r.kt)("inlineCode",{parentName:"p"},"impliedApy")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"effectiveApy"),". If the query parameters have ",(0,r.kt)("inlineCode",{parentName:"p"},"additionalData=impliedApy"),", the response will have the implied APY before and after the swap action."),(0,r.kt)("p",null,"For additional usage, please refer to our external swagger to explore more."),(0,r.kt)("h4",{id:"migrations"},"Migrations"),(0,r.kt)("p",null,"If you are using the old Hosted SDK, please take a look at ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pendle-finance/pendle-examples-public/tree/main/hosted-sdk-demo/src/migrations"},"our example")," to migrate to the new system."),(0,r.kt)("h2",{id:"pendle-restful-api"},"Pendle Restful API"),(0,r.kt)("p",null,"The Pendle Backend API provides comprehensive access to protocol data through several distinct categories:"),(0,r.kt)("h3",{id:"markets-api"},"Markets API"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Markets%20Simplified/MarketsSimplifiedController_getActiveMarkets"},"Get Active Markets")),": Returns a list of all active markets with basic metadata including market address, underlying asset, expiry date, and current status"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Markets/MarketsController_marketData_v2"},"Market Data")),": Provides comprehensive real-time market metrics including total liquidity, 24h trading volume, implied APY, underlying APY, LP APY, and price impact data"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Markets/MarketsController_marketApyHistory_v3"},"Historical Data")),": Returns time-series data in table format including historical APY values, TVL, trading volume, and other market metrics with customizable time frames"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Markets/MarketsController_marketAssets"},"Market Assets")),": Returns detailed information about all tokens associated with a market including PT, YT, LP, SY addresses, decimals, and symbols"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Markets/MarketsController_getFeaturedMarkets"},"Featured Markets")),": Returns curated list of highlighted markets with additional promotional metadata and priority ordering"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/SDK/SdkController_getMarketSpotSwappingPrice"},"Swap Pricing")),": Provides real-time spot prices for swapping between underlying tokens and PT/YT, including implied APY calculations"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Market%20Categories/MarketCategoriesController_getAll"},"Market Categories")),": Returns market categorization data including protocol names, asset types, and classification metadata")),(0,r.kt)("h3",{id:"assets-api"},"Assets API"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Asset%20Simple%20APIs/AssetsSimplifiedController_getAllAssets"},"Asset Metadata")),": Returns complete asset information including name, symbol, decimals, addresses, expiry dates, and underlying asset details for all PT, YT, LP, and SY tokens"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Prices/PricesController_getAllAssetPrices"},"Asset Pricing")),": Provides real-time USD prices for all supported assets, updated every 15 seconds for Pendle tokens and every minute for underlying assets"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Assets/AssetsController_assets"},"Asset Filtering")),": Advanced filtering capabilities allowing queries by asset type (PT/YT/LP/SY), protocol, chain, expiry status, and custom criteria")),(0,r.kt)("h3",{id:"pricing-and-ohlcv-api"},"Pricing and OHLCV API"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Prices/PricesController_ohlcv_v4"},"OHLCV Charts")),": Returns Open, High, Low, Close, Volume data in CSV format for technical analysis with customizable time ranges and intervals"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Prices/PricesController_notionalVolumeByMarket"},"Notional Volume")),": USD-denominated volume metrics providing normalized volume comparison across different markets and time periods"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Prices/PricesController_getAllAssetPricesByAddresses"},"Asset Prices by Address")),": Bulk price queries for specific token addresses, returning current USD prices for multiple assets in a single request")),(0,r.kt)("h3",{id:"vependle-governance-api"},"vePendle Governance API"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Ve%20Pendle/VePendleController_vePendleData"},"vePendle Data")),": Returns comprehensive vePendle statistics including total locked PENDLE, average lock duration, voting power distribution, and key governance metrics"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Ve%20Pendle/VePendleController_voteSnapshot"},"Vote Snapshots")),": Epoch-based voting results showing vote distributions across pools, winning pools, and historical voting patterns"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Ve%20Pendle/VePendleController_getPoolVoterAprAndSwapFee"},"Pool Voter APR/APY")),": Current and projected APR calculations for vePendle holders voting on specific pools, including swap fee distributions"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Ve%20Pendle/VePendleController_getHistoricalVotes"},"Historical Votes")),": User-specific voting history showing past voting decisions, vote weights, and reward claims"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Ve%20Pendle/VePendleController_poolMetadata"},"Pool Metadata")),": Complete information about voting pools including pool addresses, underlying assets, and vote eligibility"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Ve%20Pendle/VePendleController_pendleTokenSupply"},"PENDLE Token Supply")),": Real-time circulating and total supply metrics for PENDLE token with emission schedule data"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Ve%20Pendle/VePendleController_getMonthlyRevenue"},"Monthly Revenue")),": Protocol revenue breakdown showing monthly fee generation, revenue sources, and distribution to vePendle holders"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Ve%20Pendle/VePendleController_allMarketTotalFees"},"Market Fees Chart")),": Weekly market fees across all markets grouped by epoch, showing fee generation trends and pool performance")),(0,r.kt)("h3",{id:"user-analytics-api"},"User Analytics API"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Transactions/TransactionsController_transactions_v5"},"Transaction History")),": Comprehensive user transaction data including swaps, liquidity additions/removals, mints, redeems, and reward claims with detailed metadata"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Dashboard/DashboardController_getUserPositions"},"Portfolio Positions")),": User positions across markets and chains showing LP holdings, PT/YT balances, claimable rewards"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/PnL/PnlController_getUserTransactions"},"PnL Tracking")),": Detailed profit and loss calculations with historical performance tracking and realized/unrealized gains")),(0,r.kt)("h3",{id:"statistics-and-analytics-api"},"Statistics and Analytics API"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Statistics/StatisticsController_getAllRelatedInfo"},"Protocol Statistics")),": Comprehensive protocol metrics including total TVL, trading volume, active users, and growth statistics across all chains"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Statistics/StatisticsController_getDistinctUsersFromToken"},"User Metrics")),": Active user statistics and growth metrics showing unique users, retention rates, and user behavior patterns"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Statistics/StatisticsController_getLiquidLockerPools"},"Liquid Locker Pools")),": Analytics for liquid staking and locker token pools with TVL and yield metrics")),(0,r.kt)("h3",{id:"merkle-distribution-api"},"Merkle Distribution API"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Merkle/MerkleController_getProofV2"},"Reward Proofs")),": Cryptographic proofs for reward claims allowing users to verify and claim their earned rewards from campaigns and liquidity mining"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Merkle/MerkleController_getRewards"},"Campaign Rewards")),": Information about active and past reward campaigns including claimable amounts, campaign duration, and eligibility criteria"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"https://api-v2.pendle.finance/core/docs#/Merkle/MerkleController_getMultiTokenMerkleProof"},"Multi-token Merkle Proofs")),": Support for campaigns distributing multiple different reward tokens simultaneously")),(0,r.kt)("h3",{id:"get-list-of-active-markets"},"Get List of Active Markets"),(0,r.kt)("p",null,"Retrieve all active markets on Pendle:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://api-v2.pendle.finance/core/docs#/Markets/MarketsSimplifiedController_getActiveMarkets"},"https://api-v2.pendle.finance/core/docs#/Markets/MarketsSimplifiedController_getActiveMarkets")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Active Markets List",src:a(5803).Z,title:"Active Markets List",width:"3438",height:"1830"})),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"GET https://api-v2.pendle.finance/core/v1/1/markets/active\n")),(0,r.kt)("p",null,"returns all active markets on Ethereum mainnet."),(0,r.kt)("h3",{id:"get-latest-market-data"},"Get Latest Market Data"),(0,r.kt)("p",null,"Retrieve the latest data for a specific market, including liquidity, trading volume, and APY metrics: ",(0,r.kt)("a",{parentName:"p",href:"https://api-v2.pendle.finance/core/docs#/Markets/MarketsController_marketData_v2"},"https://api-v2.pendle.finance/core/docs#/Markets/MarketsController_marketData_v2")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Market Latest Data",src:a(9676).Z,title:"Market Latest Data",width:"3438",height:"1798"})),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"GET https://api-v2.pendle.finance/core/v2/1/markets/0xe6d4986cd935529fc4505d48e926bcd36a58a0f0/data\n")),(0,r.kt)("p",null,"returns the latest data for the market with the address ",(0,r.kt)("inlineCode",{parentName:"p"},"0xe6d4986cd935529fc4505d48e926bcd36a58a0f0")," on Ethereum mainnet."),(0,r.kt)("h3",{id:"fetch-historical-market-data"},"Fetch Historical Market Data"),(0,r.kt)("p",null,"Retrieve historical data for a market in a time-series format:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://api-v2.pendle.finance/core/docs#/Markets/MarketsController_marketApyHistory_v3"},"https://api-v2.pendle.finance/core/docs#/Markets/MarketsController_marketApyHistory_v3"),"."),(0,r.kt)("p",null,"The API includes chart data of historical max apy, base apy, underlying apy, implied apy and tvl of a market."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Market Historical Data",src:a(7504).Z,title:"Market Historical Data",width:"3428",height:"1814"})),(0,r.kt)("p",null,"To reduce payload side, the API returns the response using table format. You can read more about ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ylabio/trandingview-wiki/blob/master/UDF.md#response-as-a-table-concept"},"response as a table concept")," to understand the response."),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"GET https://api-v2.pendle.finance/core/v1/1/markets/0xe6d4986cd935529fc4505d48e926bcd36a58a0f0/historical-data?time_frame=week\n")),(0,r.kt)("p",null,"returns the historical data for the market with the address ",(0,r.kt)("inlineCode",{parentName:"p"},"0xe6d4986cd935529fc4505d48e926bcd36a58a0f0")," on Ethereum mainnet. Market data is aggregated by week."),(0,r.kt)("h3",{id:"get-metadata-for-all-assets"},"Get Metadata for All Assets"),(0,r.kt)("p",null,"Retrieve metadata (name, expiry, decimals, address) of all Pendle's assets (includes LP, YT, PT, SY):"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://api-v2.pendle.finance/core/docs#/Asset%20Simple%20APIs/AssetsSimplifiedController_getAllAssets"},"https://api-v2.pendle.finance/core/docs#/Asset%20Simple%20APIs/AssetsSimplifiedController_getAllAssets")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Assets List",src:a(2794).Z,title:"Assets List",width:"996",height:"1280"})),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"GET https://api-v2.pendle.finance/core/v3/1/assets/all\n")),(0,r.kt)("p",null,"returns metadata for all assets on Arbitrum."),(0,r.kt)("h3",{id:"get-voter-apr-and-fee-data"},"Get Voter APR and Fee Data"),(0,r.kt)("p",null,"Retrieve the voter APR and swap fees for all markets:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://api-v2.pendle.finance/core/docs#/Ve%20Pendle/VePendleController_getPoolVoterAprAndSwapFee"},"https://api-v2.pendle.finance/core/docs#/Ve%20Pendle/VePendleController_getPoolVoterAprAndSwapFee")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Voter APR and swap fees",src:a(8825).Z,title:"Voter APR and swap fees",width:"3448",height:"1828"})),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"GET https://api-v2.pendle.finance/core/v1/ve-pendle/pool-voter-apr-swap-fee\n")),(0,r.kt)("p",null,"returns voterApr of the last epoch, swap fee of the last epoch, and the projected (expected) voter apr of the current epoch for all markets."),(0,r.kt)("h3",{id:"get-vote-snapshot"},"Get Vote Snapshot"),(0,r.kt)("p",null,"Retrieve the vote snapshot for specific weeks: ",(0,r.kt)("a",{parentName:"p",href:"https://api-v2.pendle.finance/core/docs#/Ve%20Pendle/VePendleController_voteSnapshot"},"https://api-v2.pendle.finance/core/docs#/Ve%20Pendle/VePendleController_voteSnapshot")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Vote snapshot",src:a(76).Z,title:"Vote snapshot",width:"3448",height:"1824"})),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"GET https://api-v2.pendle.finance/core/v1/ve-pendle/vote-snapshot?epoch=2024-12-12T00%3A00%3A00.000Z\n")),(0,r.kt)("p",null,"returns the vote result for the epoch ",(0,r.kt)("inlineCode",{parentName:"p"},"2024-12-12T00:00:00.000Z"),"."),(0,r.kt)("p",null,"Please visit our ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pendle-finance/pendle-examples-public/blob/main/backend-api-demo/src/index.ts"},"Pendle Backend API demo")," to see more detailed examples."),(0,r.kt)("h2",{id:"rate-limiting"},"Rate limiting"),(0,r.kt)("p",null,"To ensure the stability of our services and fair usage for all users, all of our endpoints are rate-limited."),(0,r.kt)("p",null,"Pendle API utilizes a calculated query cost method to determine rate limits. Each endpoint has a specific query cost, and the overall rate limit is calculated based on the total query cost of the endpoints accessed."),(0,r.kt)("h3",{id:"rate-limiting-method"},"Rate limiting method"),(0,r.kt)("p",null,"Every user is allocated a certain number of points that they can spend per minute, referred to as the rate limit. The query cost of each endpoint varies, and the rate limit is derived from these costs. Currently, the rate limit for each user is set at 100 points per minute."),(0,r.kt)("p",null,"For example, if a user has 100 points per minute, and the query cost of an endpoint is 1, it is the same as saying that the user can make 100 queries per minute. If the query cost of an endpoint is 2, then the user can only make 50 queries per minute."),(0,r.kt)("h3",{id:"cost-calculation"},"Cost calculation"),(0,r.kt)("p",null,"Most endpoints have a fixed query cost, which is displayed in the swagger documentation under the CU (Computing Unit) box before the endpoint description."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Computing cost",src:a(1711).Z,title:"Computing cost",width:"2884",height:"1654"})),(0,r.kt)("p",null,"Some endpoints have a dynamic query cost, which depends on the number of additional data fields requested. For instance, the swap endpoint has a base query cost of 5, but if the aggregator is run, the query cost increases to 10. The more additional data fields requested, the higher the query cost."),(0,r.kt)("h3",{id:"rate-limit-headers"},"Rate limit headers"),(0,r.kt)("p",null,"In the response headers, we provide the following information to help you manage your rate limit, as shown below:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Header"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"X-RateLimit-Limit")),(0,r.kt)("td",{parentName:"tr",align:null},"The maximum number of points that the user is permitted to make in a minute.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"X-RateLimit-Remaining")),(0,r.kt)("td",{parentName:"tr",align:null},"The number of points remaining in the current rate limit window.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"X-RateLimit-Reset")),(0,r.kt)("td",{parentName:"tr",align:null},"The time at which the current rate limit window resets in UTC epoch seconds.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"X-Computing-Unit")),(0,r.kt)("td",{parentName:"tr",align:null},"The query cost of the endpoint.")))),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"x-ratelimit-limit: 100\nx-ratelimit-remaining: 99\nx-ratelimit-reset: 1724206817\n")),(0,r.kt)("p",null,"Those headers mean that the user has 100 points per minute, and they have 99 points remaining. The point will reset at 1724206817 (August 21, 2024 2:20:17 UTC)"))}m.isMDXComponent=!0},5803:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/list_active_markets-9caa9007d3b42b245a57a69e02d7e8c2.png"},7504:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/market_historical_data-49bb739492fac45513ec7c6de134d1b1.png"},9676:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/market_latest_data-5cf68a1125850d43668d7fa2914cb0d3.png"},2794:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/pt_asset_list-b52ded2203bfb02a4a73244e7a3cd3d3.png"},2037:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/sdk_add_liquidity-5677bd712d481f09ee72f41d28d850de.png"},9538:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/sdk_swap_usdc-3a7f896cad6cf7122abd7bf836e2abd0.png"},1711:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/swagger_external-013d5bf8e56a07b04ce77ee947199450.png"},76:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/vote_snapshot-a09fd0b4c05ca9991f234b38386266fd.png"},8825:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/voter_fee_apr-4b6c0595611a144e1a2b5257bc54b184.png"}}]);